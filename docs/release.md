## [Version: 3.10.8] - 2021-11-04
**功能优化**
- 优化主机批量导入后台接口逻辑，将主机批量导入接口独立出来，同时优化导入实例后返回结果结构，方便用户识别那些主机异常
- 删除toposerver代码的cores目录
- 添加业务名输入联想组件在主机搜索业务名“包含”条件时使用
- 在更新服务实例标签的时候替换原有的create和delete接口为新的update接口

**缺陷修复**
- 修复服务实例标签编辑会失败的缺陷
- 修复主机自动应用中数据不正确的问题
- 修复实例导入未显示错误详情的问题
- 修复前端业务主机高级筛选页面模糊匹配集群/模块名接口权限解析失败的问题
- 修复删除自定义层级时错误判断子节点节点名重复问题

## [Version: 3.10.7] - 2021-10-27
**新增功能**
- 接口list_service_instance_detail新增支持传入多个hostId 
- 新增查询业务的接口支持批量传参
- 新增adminserver支持注册CMDB平台信息到IAM接口 

**功能优化**
- 移除v3.9.33版本中服务实例改造中包含的清理存量的无进程服务实例的逻辑
- 调整mongodb的连接池连接空闲超时时间为25分钟
- 主机转移模块限制单次批量转移数量为500
- 业务拓扑左侧树形菜单支持记住上次拉伸位置
- 修改彻底删除业务二次确认触发方式为点击
- 主机资源池表格复制功能优化
- 对诸如业务搜索等未对搜索字符做 trim 处理的进行处理补齐
- 调整apiserver的超时时间为25s

- 兼容chrome版本升级后部分场景的跨域访问场景(使用后端代理)

**缺陷修复**
- 修复组织选择器初始化未加载组织的问题
- 修复模型字段挪入新建分组时不生效的问题
- 修复新增主机未创建服务实现的问题 
- 修复批量跨页选择只有一页时也会展示跨页选择的问题
- 修复主机属性自动应用状态与实际不符

- 修复list_biz_hosts_topo接口如果集群模块条件查询不到时返回全部的问题
- 修复创建业务成功后创建界面未闭问题和优化模型关系编辑拓扑按钮显示
- 修复transfer_host_module这个接口未创建服务实例的问题
- 修复cacheservice中主机身份watch获取toekn异常导致启动失败的问题
- 修复新增自定义层级模型后，业务下集群、主机等模块显示不正确的情况

## [Version: 3.9.34] - 2021-10-22
**新增功能**
- 接口list_service_instance_detail新增支持传入多个hostId 
- 查询业务的接口支持批量传参

**功能优化**
- 移除v3.9.33版本中服务实例改造中包含的清理存量的无进程服务实例的逻辑
- 调整mongodb的连接池连接空闲超时时间为25分钟
- 主机转移模块限制单次批量转移数量为500
- 业务拓扑左侧树形菜单支持记住上次拉伸位置
- 修改彻底删除业务二次确认触发方式为点击
- 主机资源池表格复制功能优化
- 对诸如业务搜索等未对搜索字符做 trim 处理的进行处理补齐
- 调整apiserver的超时时间为25s

**缺陷修复**
- 修复组织选择器初始化未加载组织的问题
- 修复模型字段挪入新建分组时不生效的问题
- 修复新增主机未创建服务实现的问题 
- 修复批量跨页选择只有一页时也会展示跨页选择的问题

## [Version: 3.10.6] - 2021-10-11
> 重要提示：
> 1. 新版全文检索升级，请阅读[指引](https://github.com/Tencent/bk-cmdb/issues/5507)
> 2. 业务拓扑调整，需要在升级完该版本后，利用小工具删除缓存数据，具体详情见issue[#5471](https://github.com/Tencent/bk-cmdb/issues/5471)）
> 3. 属性鉴权功能，请注意版本依赖：IAM SaaS` >= 1.4.15`，IAM 后台` >=1.7.7`。该版本涉及存量模型实例权限的迁移，如果权限较多执行init_db进行权限迁移的过程可能会持续一段时间，建议在执行权限迁移过程避免执行权限申请和实例操作。

**新增功能**
- 新增清理审计日志接口（接口使用方法可参考issue[#5603](https://github.com/Tencent/bk-cmdb/issues/5603)）
- 业务支持跨页批量编辑
- 归档业务提供“彻底删除”能力

**功能优化**
- 主机字符字段支持模糊搜索
- 查询集群模板同步状态兼容集群下无模块的情况
- 业务名称搜索默认支持模糊搜索
- taskserver清除一个月之前的冗余任务
- 通用模型内置字段名称统一为不可修改
- 业务名搜索从大小写敏感改成大小写不敏感
- coreservice优化count逻辑
- 优化多值过滤项中IP项溢出隐藏文案展示
- 修复动态分组条件操作符未显示问题
- 修复获取topo节点主机数量接口缺陷
- 修复主机属性自动应用的逻辑失效问题
- 主机与服务实例解耦优化
- 主机和通用模型实例权限申请只显示无权限的实例
- 查询有权限的实例列表功能优化
- toposerver重构
- 修改通用模型名称时，同步模型名到IAM
- 业务拓扑缓存调整（注意：需要在升级完该版本后，利用小工具删除缓存数据，具体详情见issue[#5471](https://github.com/Tencent/bk-cmdb/issues/5471)）
- 属性鉴权功能中迁移存量模型实例的权限
- 资源导出默认勾选上表头配置的属性列
- 全文检索体验优化
- 主机导出时，默认将业务、自定义层级、集群、模块各放一列导出， 方便用户对这3个模型进行筛选
- 导出实例数据时、通过并发获取用户数据，提高性能
- 主机身份事件监听在watch token里添加id和cursor信息，防止用户用过期的最后一个cursor请求时报错
- “业务” 支持批量编辑合入v3.10.x后的代码优化
- 将服务实例下进程的唯一校验规则放到唯一索引中处理
- 无权限时直接返回空不能提示错误
- 调整代码逻辑以兼容没有任何内置自定义对象的场景

**缺陷修复**
- 修复新建实例自关联的关联关系时对该实例获取两次锁导致失败的问题
- 修复使用主机/服务实例数量统计接口引起的topo创建问题
- 修复资源目录模型实例查询时，查询模式切换混乱的问题
- 修复模型关系新建层级时重复点击创建按钮仍然可以创建的问题
- 修复模型实例详情错误出现loading的问题
- 修复查看单个实例模型删除历史时加载了其他实例删除历史的问题
- 修复运营统计页面数据异常导致显示无权限的问题
- 修复集群模板同步状态会把同步人设置为当前用户的问题
- 修复主线模型事件在redis中找不到详情信息后去db查不到的问题
- 修复对于大量主机（主机数量大于500并且服务模板中进程模板数量大于10）转移场景下的panic问题
- 处理动态分组，字段类型为组织时的校验问题
- 主机数据导出时，如果没有自定义层级时，调整module、set数据的处理
- 修复查询主机删除历史bk_obj_id参数问题
- 修复模块中添加主机在有模板无进程创建服务实例时出错的问题
- 修复运营统计实例图表未显示问题
- 修复动态分组编辑和删除的鉴权，列表中只鉴权了第一个的问题
- 修复自关联模型拓扑数据展示不全的问题
- 修复模块中主机均无服务实例时无法转移到空闲机的问题
- 修复未正确获取进程数据导致无法克隆服务实例到其它主机的问题
- 修复导入模型属性时错误的将id置为0的问题
- 修正主线模型的判断条件，不以业务拓扑分组为判断条件，使该分组下的通用模型能正常同步到IAM
- upgrade添加跳过未注册动作的升级操作
- 修复审计下无法查询动态分组的问题
- 通用模型实例鉴权问题修复
- 修复了同步集群模板实例时事务提交失败导致的报错
- 主机搜索解决输入 \ 字符搜不到的问题

**版本依赖**
- IAM SaaS` >= 1.4.15`
- IAM 后台` >=1.7.7`

## [Version: 3.9.33] - 2021-10-11
**新增功能**
- 业务支持跨页批量编辑
- 归档业务提供“彻底删除”能力

**功能优化**
- 主机导出时，默认将业务、自定义层级、集群、模块各放一列导出， 方便用户对这3个模型进行筛选
- 导出实例数据时、通过并发获取用户数据，提高性能

**缺陷修复**
- 处理动态分组，字段类型为组织时的校验问题
- 主机数据导出时，如果没有自定义层级时，调整module、set数据的处理
- 修复查询主机删除历史bk_obj_id参数问题
- 修复模块中添加主机在有模板无进程创建服务实例时出错的问题
- 修复运营统计实例图表未显示问题
- 修复动态分组编辑和删除的鉴权，列表中只鉴权了第一个的问题
- 修复自关联模型拓扑数据展示不全的问题
- 修复模块中主机均无服务实例时无法转移到空闲机的问题
- 修复未正确获取进程数据导致无法克隆服务实例到其它主机的问题
- 主机搜索解决输入 \ 字符搜不到的问题

## [Version: 3.5.52] - 2021-09-28
**功能优化**
- 导出实例数据时，分页获取用户数据

## [Version: 3.9.32] - 2021-09-13
**新增功能**
- 新增清理审计日志接口（接口使用方法可参考issue[#5603](https://github.com/Tencent/bk-cmdb/issues/5603)）

**功能优化**
- taskserver清除一个月之前的冗余任务
- 通用模型内置字段名称统一为不可修改
- 业务名搜索从大小写敏感改成大小写不敏感
- coreservice优化count逻辑
- 优化多值过滤项中IP项溢出隐藏文案展示
- 修复动态分组条件操作符未显示问题
- 修复获取topo节点主机数量接口缺陷
- 修复主机属性自动应用的逻辑失效问题
- 主机与服务实例解耦优化
- 主机和通用模型实例权限申请只显示无权限的实例
- 查询有权限的实例列表功能优化

**缺陷修复**
- 修复查看单个实例模型删除历史时加载了其他实例删除历史的问题
- 修复运营统计页面数据异常导致显示无权限的问题
- 修复集群模板同步状态会把同步人设置为当前用户的问题

## [Version: 3.9.31] - 2021-08-18
**功能优化**
- 主机字符字段支持模糊搜索
- 查询集群模板同步状态兼容集群下无模块的情况
- 业务名称搜索默认支持模糊搜索

**缺陷修复**
- 修复新建实例自关联的关联关系时对该实例获取两次锁导致失败的问题
- 修复使用主机/服务实例数量统计接口引起的topo创建问题
- 修复资源目录模型实例查询时，查询模式切换混乱的问题
- 修复模型关系新建层级时重复点击创建按钮仍然可以创建的问题
- 修复模型实例详情错误出现loading的问题

## [Version: 3.5.51] - 2021-08-18
**功能优化**
- 修改下载模板枚举值长度限制

## [Version: 3.10.5] - 2021-08-06

**功能优化**
- 模型和主机自关联显示优化

**缺陷修复**
- 修复查询拓扑数量接口在集群下没有模块的情况下传nil查询报错的问题
- 修复集群模板状态表查询逻辑
- 修复批量创建集群名称校验问题
- 仅导出实例的自关联模型，在实例关联了多个模型实例时报错的问题

## [Version: 3.9.30] - 2021-08-06
**新增功能**
- list_biz_hosts接口新增支持按模块属性查询数据，list_biz_hosts_topo接口新增支持按集群、模块属性查数据
- 新增清除冗余task任务记录并设置定时清理机制
- 新增批量获取topo节点主机/服务实例数量的接口，业务拓扑节点主机/服务实例数量异步加载
- 服务模板绑定IP的校验规则放开，允许绑定IP为空
- 在主机类型枚举中增加Solaris类型

**功能优化**
- 获取实例数据时，前端没有传递排序字段时，默认使用实例ID进行排序
- 全部视图下将停用模型放置到同组的末尾
- 首页主机高级搜索跳转到资源主机全部列表页
- 放开首页主机搜索最大500条的限制，调整为10000。首页主机搜索IP与固资编号混合时可选择其中一种方式搜索
- 更新helm文档
- ip正则校验表达式增加对ip为0.0.0.0的校验
- 模型和主机自关联显示优化

**缺陷修复**
- 修复导出Excel时展示空用户名的问题
- 修复主机详情返回到业务拓扑主机列表条件保留问题
- 修复进程绑定信息校验和显示异常问题
- 修复查询拓扑数量接口在集群下没有模块的情况下传nil查询报错的问题
- 修复集群模板状态表查询逻辑
- 修复批量创建集群名称校验问题

## [Version: 3.10.4] - 2021-08-02
**新增功能**
- list_biz_hosts接口新增支持按模块属性查询数据，list_biz_hosts_topo接口新增支持按集群、模块属性查数据
- 新增清除冗余task任务记录并设置定时清理机制
- 新增批量获取topo节点主机/服务实例数量的接口，业务拓扑节点主机/服务实例数量异步加载
- 服务模板绑定IP的校验规则放开，允许绑定IP为空。
- 在主机类型枚举中增加Solaris类型
- 取消不允许创建实例自关联限制

**功能优化**
- 获取实例数据时，前端没有传递排序字段时，默认使用实例ID进行排序
- 全部视图下将停用模型放置到同组的末尾
- 首页主机高级搜索跳转到资源主机全部列表页
- 放开首页主机搜索最大500条的限制，调整为1w。 首页主机搜索IP与固资编号混合时可选择其中一种方式搜索
- 更新helm文档
- ip正则校验表达式增加对ip为0.0.0.0的校验
- 删除事件详情的时间类型按json的格式进行序列化
- 模型详情实例数量获取优化

**缺陷修复**
- 修复导出Excel时展示空用户名的问题
- 修复主机详情返回到业务拓扑主机列表条件保留问题
- 修复进程绑定信息校验和显示异常问题
- 修复Excel导入主机更新数据时，如果关联数据为空则导入失败的问题
- 修复新建实例自关联的关联关系时对该实例获取两次锁导致失败的问题

## [Version: 3.5.50] - 2021-08-02
**功能优化**
- excel导出用户管理中不存在的用户时，导出中英文名时保留原用户名并提示用户不存在
- 使用get_all_users接口获取全量用户
- 添加不允许主机转移至归档业务的校验

**缺陷修复**
- 修复导出Excel时展示空用户名的问题

## [Version: 3.10.3] - 2021-07-20

**新增功能**
- 各个模块新增version接口获取版本相关信息
- 前后端统一正则校验方式，统一用后端的正则校验方式进行校验。
- 首页主机搜索添加高级搜索入口跳转到资源主机高级筛选侧滑
- 集群模板拓扑树显示区域加loading
- 禁止主机转移至已经归档的业务
- 事件watch支持通用模型实例事件按模型分类订阅功能
- 事件watch支持主线模型实例事件订阅功能
- 主机的自动发现信息属性分组下的属性调整为可编辑

**功能优化**
- 优化进程模板与实例中进程绑定端口提示
- excel导出数据时，如果数据中的用户在用户管理中不存在时，导出中英文时保留原用户名并提示用户不存在、
- 上报的主机静态数据数据采用新协议时，直接更新主机数据不再校验时间窗口。
- 权限中心移除多余的关联权限(编辑服务实例、删除服务实例)
- 调整拓扑节点名称长度限制为256个字符

**缺陷修复**
- 修复模型关联列表id下划线未完整显示的问题
- 修复主机详情用户类型字段UI显示异常的问题
- 修复重命名云区域时可能出现更新失败的问题
- 修复日期面板偶现的被遮挡问题
- 修复复制主机集群名、模块名不完整的问题
- 修复主机属于多模块时，集群、模块相关字段显示不正确的问题
- 修复取消关联主线模型实例后取消关联失败的问题
- 修复实例关联列表错误的显示了实例自身的问题
- 修复导出实例取消按钮无效的问题
- 修复主机导入时，如果没有实例数据时更新失败的问题

**不兼容提示**
- 批量删除实例接口(batch_delete_inst)添加原来漏掉的鉴权功能，现补充上。加上鉴权后，可能不向下兼容，即原来无权限的用户现在不能正常调用该接口，需要平台和用户关注，如果确实需要删除权限，则直接申请该权限即可。
- 查询业务接口(search_business)接口，当业务不存在时，原来的策略是报错，现不报错，直接返回空。[PR:5473]


## [Version: 3.9.29] - 2021-07-20
**新增功能**
- 各个模块新增version接口获取版本相关信息
- 前后端统一正则校验方式，统一用后端的正则校验方式进行校验。
- 首页主机搜索添加高级搜索入口跳转到资源主机高级筛选侧滑
- 集群模板拓扑树显示区域加loading
- 禁止主机转移至已经归档的业务


**功能优化**
- 优化进程模板与实例中进程绑定端口提示
- excel导出数据时，如果数据中的用户在用户管理中不存在时，导出中英文时保留原用户名并提示用户不存在、
- 上报的主机静态数据数据采用新协议时，直接更新主机数据不再校验时间窗口。
- 权限中心移除多余的关联权限(编辑服务实例、删除服务实例)
- 调整拓扑节点名称长度限制为256个字符


**缺陷修复**
- 修复模型关联列表id下划线未完整显示的问题
- 修复主机详情用户类型字段UI显示异常的问题
- 修复重命名云区域时可能出现更新失败的问题
- 修复日期面板偶现的被遮挡问题
- 修复复制主机集群名、模块名不完整的问题
- 修复主机属于多模块时，集群、模块相关字段显示不正确的问题
- 修复取消关联主线模型实例后取消关联失败的问题
- 修复实例关联列表错误的显示了实例自身的问题

**不兼容提示**
- 批量删除实例接口(batch_delete_inst)添加原来漏掉的鉴权功能，现补充上。加上鉴权后，可能不向下兼容，即原来无权限的用户现在不能正常调用该接口，需要平台和用户关注，如果确实需要删除权限，则直接删除该权限即可。
- 查询业务接口(search_business)接口，当业务不存在时，原来的策略是报错，现不报错，直接返回空。[PR:5473]


## [Version: 3.5.49] - 2021-07-08

**新增功能**
- 调整接入用户管理使用的接口
- 新增定时对账zk节点任务能力

**功能优化**
- cmdb导出实例数据，当导出的字段包含用户字段，且用户字段有值时，导出非常慢
- 开放字符数限制及修改前端校验规则[PR:5416]
- 调整前端正则校验方式，正则本身及内容的合法校验全部用后端校验

**版本依赖**
- 用户管理后台版本` >= v1.5`

## [Version: 3.10.2] - 2021-07-01

**新增功能**
- 小工具增加对redis的操作支持
- 主机的自动发现信息属性字段调整为可编辑
- 服务模板实例标签加同步状态批示提示
- 模型管理页增加“全部”入口
- 实例的关联列表现在支持点击查看详情

**功能优化**
- 业务列表筛选组件切换为通用搜索组件
- 创建集群、模块时，对应模板列表按最后更新时间排序
- 主机自动应用的详情预览拉取数据改为异步加载，提升性能体验
- 主机自动应用的详情预览拉取接口内容瘦身，避免拉取冗余数据
- 新增服务实例，主机和拓扑关系表的2个索引
- 优化显示业务主机追加至业务模块菜单逻辑
- 优化集群模板同步性能，提升交互体验，同时去掉了集群模板及集群表中的version管理字段
- 实例拓扑图视觉和交互优化，解决出现重复节点循环嵌套的问题
- 模型管理页面中的实例数改为按需获取，提升首屏加载性能

**缺陷修复**
- 修复云账户编辑时连通测试通过无法保存的问题
- 修复非业务主机详情选项卡UI异常的问题
- 修复筛选主机并查看详情后返回筛选条件丢失的问题
- 修复创建拓扑自定义层级节点时出现ID字段的问题

## [Version: 3.9.28] - 2021-07-01

**新增功能**
- 小工具增加对redis的操作支持
- 主机的自动发现信息属性字段调整为可编辑
- 服务模板实例标签加同步状态批示提示
- 模型管理页增加“全部”入口

**功能优化**
- 业务列表筛选组件切换为通用搜索组件
- 创建集群、模块时，对应模板列表按最后更新时间排序
- 主机自动应用的详情预览拉取数据改为异步加载，提升性能体验
- 主机自动应用的详情预览拉取接口内容瘦身，避免拉取冗余数据
- 新增服务实例，主机和拓扑关系表的2个索引
- 优化显示业务主机追加至业务模块菜单逻辑
- 优化集群模板同步性能，提升交互体验，同时去掉了集群模板及集群表中的version管理字段

**缺陷修复**
- 修复云账户编辑时连通测试通过无法保存的问题
- 修复非业务主机详情选项卡UI异常的问题
- 修复筛选主机并查看详情后返回筛选条件丢失的问题
- 修复创建拓扑自定义层级节点时出现ID字段的问题
- 修复部分场景下创建实例关联关系奶的问题，导致1:1,1:n的实例关联关系出现错误


## [Version: 3.5.48] - 2021-06-17
### 缺陷修复
- UI: 修复表单/表单详情按钮组在部分分辨率下抖动的问题

## [Version: 3.10.1] - 2021-06-17
> 重要提示：
> 1. v3.10版本为大版本升级，从低于v3.10的版本升级到v3.10版本时，需要**停服**升级，升级过程中会对现有的存量数据进行迁移，升级时间可能会比较长（取决于模型实例的数据量）。
升级前需要用提供的小工具进行数据验证，验证后处理完数据才能进行正常的升级流程。
> 2. 升级前，请仔细阅读这里的[指引](https://github.com/Tencent/bk-cmdb/issues/5308), 并按照指引中的内容进行升级的的梳理、准备工作。
> 3. `该版本仅为测试版本，不能用于正式环境。`

**新增功能**
- 新增了主机身份事件服务。同时调整了主机身份接口(search_hostidentifier)协议，简化协议内容，性能提升2个量级，具体详情见[这里](https://github.com/Tencent/bk-cmdb/issues/5183)。(注：该功能依赖GSE的版本, 目前未外发)。
- 新增支持模型实例事件服务功能。
- 新增了一批模型实例查询与count相关的接口，解决老接口存在的性能问题。
- 增加事件上报连通性检测以及升级gsecmdline命令

**功能优化**
- 调整了通用模型实例的底层存储结构，提升通用模型的数据管理能力。
- 调整了模型的唯一校验的管理规则，去掉了允许"空值"不参与唯一校验的特性，使得整个数据在唯一的管理上更为准确，保证数据的准确性。同时调整了可以参与唯一校验的字段规则。
- 优化了资源导入导出的相关逻辑。

**下线功能**
- 下线了"事件订阅"功能的全套服务，由目前的事件watch(ESB接口为resource_watch)服务替代事件服务，新的事件watch服务功能更灵活，服务更稳定，吞吐能量更强。(注：该项依赖GSE的版本>=v1.7.9， 否则可能会导致GSE的gse_syncdata服务无法正常启动)
- 下线了"主机快照"的全套服务及相关接口，该功能的相关能力由蓝鲸监控提供。
- 下线了resource_watch中的set_template资源订阅功能。
- 下线了一批模型实例相关的接口，这些接口存在性能问题，由新上的接口替代。


`新增、调整、下线的接口详情`详见[指引](https://github.com/Tencent/bk-cmdb/issues/5308)。

## [Version: 3.9.27] - 2021-06-17
### 新增功能
- cmdb 主机模型内置属性【操作系统类型】增加 UNIX
- cmdb工具中增加对db的操作，目前支持查找，删除和显示指定db的所有collections
- 增加事件链路检查和升级gsecmdline命令

### 优化改进
- 模板/拓扑节点名称校验规则更新
- 查询服务模版同步状态的接口添加auth parser
- 动态分组支持主机的云区域字段
- 开放进程模板别名修改
- 调整通用模型实例表的es索引名
- UI: 去除业务拓扑服务实例表格的行吸顶效果
- UI: 主机属性不可编辑状态在自动应用的完善
- UI: 主机表格显示字段由切换显示筛选字段变更为追加显示
- UI: 修改业务拓扑移出菜单显示判断逻辑

### 缺陷修复
- 修复集群模板实例展示的问题
- UI: 修复操作审计详情未显示业务自定义字段的问题
- UI: 修复模型管理唯一标识不可见的问题
- UI: 修复操作审计入参错误的问题
- UI: 修复集群节点信息跳转链接失败的问题
- UI: 修复动态分组预览未显示完整表格的问题
- UI: 修复服务模板编辑后显示提示信息失败的问题

## [Version: 3.9.26] - 2021-06-03
### 新增功能
- 操作审计的 `账号` 字段现在支持 `in` 和 `not in` 两种查询条件（open_paas >= v2.12.17）

### 优化改进
- 对齐了服务模板和业务拓扑的命名规则，避免生成实例时因规则不同导致数据错误
- 改进主机移动模块的功能交互逻辑，增加 `追加` 和 `移出` 两个操作入口，满足对指定主机增量更新拓扑归属的需求
- 调整查询审计列表逻辑中对传参的判断逻辑，拆分新老参数判断方式
- 为了更好的提高兼容性和扩展能力，调整 ES 检索接口协议，优化入参和结果
- 现在当服务模板内有实例未更新同步时，在列表处会有 `小红点` 的提示了
- 为 `目标模型` 选择器添加了搜索的能力，优化因模型太多不好选中的体验
- 去除模型搜索结果没有匹配的分组显示，简化了搜索结果的体验
- 一些常规的 UI / UX 优化...

### 缺陷修复
- 修复在空闲机模块下转移主机到自身时，出现主机数 count 不准确的问题
- 解决全文检索的查询结果中命中了 `模型` 数据，但没有正常显示标签页的问题
- 解决业务自定义时间类型字段无法正常作用于动态分组的问题
- 解决批量编辑场景下，时间类型字段异常报错的问题

## [Version: 3.9.25] - 2021-05-14

**新增功能**
- 操作审计名称查询默认精确查找
- 主机搜索接口支持按时间搜索
- 主机/实例查询支持时间范围
- 模型实例长短字符支持精确/模糊搜索切换
- 新增apimachinery中2个metrics指标

**功能优化**
- 移除遗留的metadata兼容逻辑
- 对模型字段正则校验文本进行前置校验
- 拓扑缓存管理支持按ID进行排序管理，并去重。
- 前端打包构建升级

**缺陷修复**
- 升级click-outside指令，解决服务分类/资源目录无法操作的问题
- 修复长短字符搜索组件无法粘贴的问题
- 修复集群被删除后， 集群同步表数据还存在，依然展示在集群模板实例中展示
- 修复集群同步表中没有集群同步市局的时候，在集群模板实例中不显示
- 修复es检索不到通用模型实例的问题
- 修复主机自定义显示列加载时不显示模块名/集群名的问题
- 修复模型管理实例字段字段排序设置组件未正确渲染的问题
- 修复主机筛选部分组件输入框被操作按钮遮挡的问题
- 修复删除事务在部分场景下无法正常入库的问题 

## [Version: 3.5.47] - 2021-05-06
**缺陷修复**
- 修复在zk连接失败的情况下多次重连产生多个连接的问题

## [Version: 3.9.24] - 2021-04-23
**新增功能**
- 支持通过bk_obj_id查询实例关联的操作审计
- 查询实例接口支持按时间查询

**功能优化**
- UI: 对接前端代码规范
- 添加主机模型的“CPU架构”字段之前校验它所在的属性分组是否存在
- 更新模型实例的校验的忽略字段仅对包括主线模型的内置模型生效
- 主机快照采集改为ip与mac地址一一对应，如果ip没有对应的mac则置空
- 开放不同自定义层级下集群同名限制
- 优化普通模型实例查询交互
- 优化操作审计loading效果

**缺陷修复**
- 修复导入实例报错信息不正确问题
- 修复获取拓扑路径接口使用metadata查询自定义层级实例的问题
- 修复es全文检索不到含_或.字符的问题，并能够检索到含有([等特殊字符的内容
- 修复导出用户类型字段顺序与录入顺序不同的问题
- 修复新增模型字段分组索引不正确的问题
- 修复全文检索显示实例模型名称为undefined的问题

## [Version: 3.9.23] - 2021-04-08
**新增功能**
- 服务模板同步对比接口支持返回上service_template_id值
- 主机快照采集支持mac地址去重功能

**功能优化**
- 时间类型字段兼容带时区的格式
- 优化批量更新主机接口的鉴权性能
- 实例时间字段格式化，避免提交UTC格式

**缺陷修复**
- 修复创建默认服务分类所在的upgrader失败时重复创建多个服务分类的问题
- 属性自动应用启停判断修正
- 修复在zk连接失败的情况下多次重连产生多个连接的问题
- 修复导入模型异常问题


## [Version: 3.8.16] - 2021-04-08
**功能优化**
- 主机快照采集，支持mac去重功能。

## [Version: 3.8.15] - 2021-04-01
**新增功能**
- 主机快照采集支持在多IP的场景下，采集对应多内外网MAC地址的功能


## [Version: 3.9.22] - 2021-04-01
**新增功能**
- 主机静态数据采集支持在多IP的情况下获取各IP对应的mac地址
- 主机模型新增"CPU架构"字段
- 业务拓扑模块节点信息添加属性自动应用标识
- 业务导航权限列表静默刷新
- 查询服务模版差异接口支持部分比较而提前返回差异结果
- 支持进程实例watch功能
- 查询接口支持左高右低优先级的多字段排序功能
- list_process_related_info点分五位查询进程的接口支持按进程属性筛选查询功能
- 新增支持权限中心常用分组：业务运维，主机资源管理员，开发者，模型关系维护人，审计员。
- 新增根据自定义层级实例信息查询主机所属的关系接口find_host_relations_with_topo。
- 新增根据主机的信息，构建查询条件，查询主机详情与其所属拓扑的信息接口list_host_detail_topology。
- 新增支持contain,exist,not_exists查询操作符，其中contain操作符为正则查询，且大小写不敏感。
- 添加注册主机静态快照采集的dataid的接口，支持dataid的新增、更新、和删除功能。
>  * API： POST http://{adminserver的地址}/migrate/v3/migrate/dataid，不需要传body
>  * gse dataid管理接口功能依赖gse版本>=v1.7.6

> 新增功能API版本依赖：
> esb open_paas版本 >= 2.12.10


**功能优化**
- 调整查询内置模块的方式，不带模块名
- 优化事件watch中，主从切换时重新watch的逻辑
- UI优化动态分组查询对象选择器
- 主机IP等特殊字段转换为数组时如果为空则值置为nil，非空则去除前后空格和逗号。(注：该调整会删新现有主机表中的主机IP等字段数据，会走升级流程)
- 事件监听忽略context cancelled错误
- 调整进程实例数据升级时，针对未绑定IP的进程升级策略，若已经绑定IP，则跳过，未绑定则执行升级流程。[PR:5153]
- adminserver的mongodb、redis和common配置从相应配置文件读取

**缺陷修复**
- 粘性布局闪烁的问题
- 部分字段预览失败的问题

## [Version: 3.9.21] - 2021-03-22
**功能优化**
- 优化动态分组查询对象选择器
- 进程模板新增绑定信息，同步时使用默认值新增进程中的绑定信息
- 调整事件服务监听逻辑，由同步调整为异步，加快启动速度。
- v3.2升级到v3.9进程有空bind_ip时使用默认值127.0.0.1

**缺陷修复**
- 修复导出模型失败的问题
- 修复zk节点丢失后不能重新注册的问题


## [Version: 3.5.46] - 2021-03-15
**新增功能**
- 新增记录长时间请求的日志记录功能
- 实例关联表新增索引 

**功能优化**
- 优化主机快照更新逻辑，只更新有效数据

**缺陷修复**
- 修复在部分极端场景下无法注册zk服务的问题


## [Version: 3.9.20] - 2021-03-08
**新增功能**
- 进程模板新增绑定信息，同步时使用默认值新增进程中的绑定信息

**缺陷修复**
- 修复zk节点丢失后不能重新注册的问题
- 修复初始化事件表的时候StartAtTime为空时panic的问题 

## [Version: 3.9.19] - 2021-03-04
**新增功能**
- 查询服务模版列表接口支持按模版名称精确或模糊匹配查找
- 支持新版的主机静态数据采集功能与协议，依赖监控新版采集插件(bkmonitorbeat)上报数据

**功能优化**
- 主机实时状态功能前端展示页面下线，主机模型及实例中的bk_cpu_mhz字段会删除。（注：如果主机数量较多，此版本的执行migrate脚本升级时间可能会略长）

**缺陷修复**
- 修复业务自定义层级校验异常问题
- 修复实例详情变更记录搜索为空时显示错误的问题

## [Version: 3.9.18] - 2021-03-02
**新增功能**
- 业务主机按模块名、集群名过滤添加自动补全功能
- 动态分组集群、模块名筛选支持自动补全

**功能优化**
- 优化业务拓扑主机菜单的归类
- 操作审计新增appcode与request id字段
- 实例关联表和进程模版表增加索引（增加索引过程中出现的问题，处理方式可参考 issue [#5072](https://github.com/Tencent/bk-cmdb/issues/5072)）
- 主线模型实例创建更新时，对bk_parent_id字段进行校验
- 允许主机导出'录入方式'和'录入时间'字段
- 主机更新时允许更新绑定了自动应用的字段
- 调整查询业务无权限错误返回
- 第一次watch如果有例如token过期的错误则不用token拉取事件
- watch失败时返回真实错误码而非-1
- 点分五位获取进程实例信息接口支持按进程字段排序
- 调整object接口的路由匹配方式
- 无权限返回内容里增加操作ID、资源类型ID、实例ID对应的名称

**缺陷修复**
- 修复不带fields监听事件时查询删除事件详情失败的问题
- 修复主机转移到带模版的模块下重复创建进程实例的问题
- 修复实例删除历史为空时页面显示错误的问题
- 修复离开页面确认在部分情况下会重复提示的问题
- 修复当主机有关联主线模型实例时，导出主机失败的问题
- 修复进程编辑后报唯一校验失败而无法保存的问题

## [Version: 3.9.17] - 2021-02-02
**新增功能**
- 添加根据实例名模糊查询模型实例名称列表的接口
- 服务实例进程模板允许设置非锁定的默认值
- 主机属性克隆支持用主机ID克隆
- 添加校验业务字段的hook
- 新增记录长时间请求的日志记录功能
- 主机静态快照数据支持新的静态数据上报协议

**功能优化**
- 清除topolatest里有替换接口的旧接口
- 优化申请权限关联资源显示为资源名称
- 无权限样式UI和交互统一优化
- 初始化进程时，所有字段均使用模板的默认值
- 进程的非锁定字段可以修改，锁定字段不可修改
- 模板校验绑定IP、端口、协议必填
- 主机快速筛选支持搜索多个
- 人员选择器支持配置快速选择自己
- 事件不需要重试时将retryCount归零
- 优化查询服务模版和服务实例差异的接口
- 优化同步服务模版和服务实例差异的接口
- 优化统计业务总数、主机总数的接口
- 优化根据模型字段分组计数的接口
- 优化事件订阅的日志输出
- 优化业务下创建自定义字段唯一标识重名时的错误返回提示
- 优化创建同名集群时的错误返回提示
- 调整主机快照更新逻辑，只更新有效数据
- 创建服务实例接口性能优化
- 去掉禁用事务的flag和相关代码逻辑

**缺陷修复**
- 修复主机列表存在多业务拓扑时渲染错误的问题
- 修复统计各业务下主机数量不对的问题
- 修复主机id_list缓存刷新失败的问题
- 修复批量更新带有部分联合唯一键字段时失败的问题
- 修复ES全文检索MAC地址这种带有':'等特殊符号报错的问题

## [Version: 3.5.45] - 2021-01-18
**新增功能**
- 新增记录长时间请求的日志记录功能

**缺陷修复**
- 修复mongodb执行语句超时或切主后的问题

## [Version: 3.9.16] - 2021-01-11
**功能优化**
- 主机搜索字符类型支持粘贴
- 优化大批量导入主机逻辑
- 导出选择字段全选修改为按分组全选
- 主机选择器中已选主机添加重复标签
- 操作审计所属模型查询条件不显示无模型的分组
- 服务分类标题样式等其它优化项
- 接口clone_host_property功能调整，去掉其中转移主机的逻辑，仅允许拷贝可编辑且属于唯一校验规则的字段。`形态调整，该接口不兼容原有逻辑`。

**缺陷修复**
- 修复在excel导入编辑少量主机字段时，没有忽略业务拓扑、业务名、云区域等字段值为'--'而导致报错的问题
- 修复业务拓扑下跨业务转主机错误
- 修复首页云区域混合搜索判断错误的问题
- 修复服务分类模板分类筛选错误的问题
- 修复资源池业务拓扑复制数据为空的问题
- 修复转移主机目录可重复点击的问题
- 修复模板模块新增服务实例第一内外网IP设置不正确的问题
- 修复主机云区域更新校验传值顺序错误的问题
- 修复查询上一次最后的事件的条件错误的问题

## [Version: 3.9.15] - 2021-01-06
**新增功能**
- 单个主机支持修改业务拓扑
- 将主机导出excel中的用户名从英文修改为中英文
- excel导入主机分成导入新增和导入更新两个接口
- excel导入新增主机支持导入到资源池自定义目录
- excel导出主机支持大批量导出
- 增加异常数据监控采集上报组件
- 添加校验禁止用通用模型实例接口查询biz, module, set, host, plat, process

**功能优化**
- 事件功能优化 (新增mongodb database需求，需要新的db，默认为cmdb_event)
- 移除find_host_by_module接口
- 保持excel导入的错误提示信息行数有序
- 删除实例操作性能优化
- 转移主机新增服务实例默认折叠
- 主机无快照提示及跳转链接优化
- 优化空闲机池模块排序
- 转移主机预览减少非必要渲染
- 添加判断主机云区域更新操作是否合法的hook
- 去掉excel导出字段业务拓扑里的业务级别
- 去掉下载主机excel模版里云区域字段
- excel导出的云区域ID字段标注为'-'
- 优化模型实例的创建和更新操作
- 优化zk重连操作
- 优化请求资源失败提示
- 优化登录链接构造方法
- 主机筛选条件字段不显示业务拓扑
- 服务模板删除进程显示同步实例提示
- 集群模板编辑时添加模板支持全选和不显示列表中的编辑按钮
- 服务模板列表不显示编辑按钮

**缺陷修复**
- 修复主机表格显示字段数据获取错误的问题
- 修复清空zk上的限流规则后没有被同步的问题
- 修复zk上的cc配置没有持续被watch的问题

## [Version: 3.5.44] - 2020-12-23
**缺陷修复**
- 修复业务自定义层级创建时的鉴权失败问题
- 修复excel导入数据里用户类型值为中英文时的正则校验失败问题
- 修复获取用户信息时使用登陆版本错误的问题

## [Version: 3.5.42] - 2020-12-15
**新增功能**
- 将主机实例和模型实例导出excel中的用户名从英文修改为中英文

**功能优化**
- 将升级程序里的删除实例关系的updatgeflag字段改成分页删除

## [Version: 3.9.14] - 2020-12-14
**新增功能**
- 增加刷新配置的shell工具脚本
- 主机归还资源池选择指定目录归还
- 主机导出支持选择字段
- 从业务归还主机到主机池，支持选择目标目录
- 为mongodb、rest response增加metrics

**功能优化**
- 主机池全部tab允许分配非业务主机
- 优化分配到其他业务加载时的loading效果
- 集群模板编辑拓扑交互优化
- 进程表格绑定信息列tooltip显示优化
- 服务模板交互细节优化
- 集群模板编辑创建成功提示文案和按钮跳转优化
- 主机详情业务拓扑链接跳转优化
- 将coreservice中的主机快照数据接口迁移到cacheservice
- 优化前端鉴权性能
- 导出主机可选字段不显示ID和业务拓扑
- 清除自定义层级实例的default字段
- 主机详情拓扑展示优化（添加单双列切换提示和单个拓扑值时始终保持铺满显示）
- 导出主机可选字段去掉云区域和内网IP
- 主机详情服务列表中支持对服务实例名称的编辑
- 增加补全自定义层级模型实例bk_biz_id字段的升级程序
- 优化集群模板对比和同步接口
- 调整进程属性字段的展示顺序
- 将启动等待时长的最小值设为0
- 将升级程序里的删除实例关系的updatgeflag字段改成分页删除，防止实例数据过多时DB io timeout
- 主机筛选IP校验由实时校验改为失焦校验
- 禁止通过toposerver创建内置字段
- 优化/topo/internal/{owner}/{bk_biz_id}/with_statistics接口
- 将查询进程的具体操作从service拆出到logics
- 进程模板和进程信息中的绑定信息允许没有任何数据

**缺陷修复**
- 解决业务拓扑及服务模板重复点击提交问题
- 修复存在多个开发商的资源池时authserver查询到错误的资源池ID的问题
- 修复服务模板字段在表格列表中未正确显示的问题
- 修复主机表格配置在无筛选项时不生效的问题
- 修复集群模板编辑时错误的权限配置
- 修复业务、通用模型实例表格配置属性不显示的问题
- 修复动态分组对人员类型字段旧数据展示未兼容的问题
- 修复不能按服务模版名查找筛选服务模版列表的问题

## [Version: 3.9.13] - 2020-11-25
**新增功能**
- 主机增加快速搜索功能
- 首页支持“云区域id:ip"格式搜索
- 主机支持"云区域id:ip"格式筛选
- 主机支持批量复制"云区域id:ip"格式
- 主机导出功能支持选择字段
- 新增点分五位查询进程实例的相关信息接口
- 增加查询业务topo树简要信息的接口
- 增加批量查询服务模版计数信息的接口
- 服务实例创建时可自定义名称
- 服务分类列表页中显示一级分类ID
    
**功能优化**
- 主机高级筛选功能交互优化
- 主机条件收藏功能交互优化
- 审计查询接口的时间字段调整为必填字段
- 服务模板列表数量同步查询变更为异步查询
- 进程服务模版列表接口支持只传进程模版id数组批量获取进程模版详情
- 运营统计后台停止统计数据时，显示提示信息
- 新加修改进程bind info相关升级
- 清除docker_server_version和docker_client_version相关逻辑
- 业务拓扑跳转到集群模板由编辑页改为查看页
- 业务拓扑选择空集群节点时显示创建模块提示
- 清除bk_childid和bk_parentid字段和相关逻辑
- 移除进程和进程模版的"拉起间隔"、"功能ID"属性， 进程增加"启动等待时长"属性
- 删除进程实例和进程模版实例的auto_time_gap和bk_func_id字段

**缺陷修复**
- 修复获取拓扑节点路径的接口在集群的上一级为业务的时候不设置集群名字的问题
- 修复属性分组唯一索引设置错误的问题
- 修复导入主机时候，自定义字段无法导出的问题

## [Version: 3.5.41] - 2020-11-25
**功能优化**
- 清除docker_server_version和docker_client_version相关逻辑

**缺陷修复**
- 修复空指针引用而panic的问题

## [Version: 3.9.12] - 2020-11-17
**新增功能**
- 添加设置进程VIP的hook
- 新增事件flow watch的metrics采集
- 下线动态分组相关的老接口：
    * create_custom_query
    * get_custom_query_data
    * search_custom_query
    * get_custom_query_detail
    * update_custom_query
    * delete_custom_query

**功能优化**
- 权限中心拉取资源与mongodb读优化
- 在主机的导出excel中增加"业务"栏,并更改相关cell外观
- 模型字段增加显示id和支持搜索
- 操作审计查询模型实例时增加所属模型条件
- 拓扑节点信息节点ID作为独立属性显示
- 服务分类支持ID搜索和显示优化
- 添加校验业务的hook和模型唯一校验的hook

**缺陷修复**
- 修复服务模版同步pid文件路径、启动优先级信息失败的问题



## [Version: 3.9.11] - 2020-11-11
**新增功能**
- 增加更新服务实例的接口

**功能优化**
- list_biz_hosts接口返回数据为空时，返回值为空数组
- 操作审计允许根据bk_obj_id查询
- 运营统计优化
- 去掉操作进程或服务实例所触发的自动更新服务实例名称逻辑

**缺陷修复**
- 修复多开发商情况下一个业务会有多个相同的自定义字段的问题

## [Version: 3.9.10] - 2020-11-05
**功能优化**
- 优化当事件resume token失效时，重新watch
- 优化主机池文案
- 优化右上角文档链接
- 去除创建蓝鲸业务拓扑除空闲机池之外的节点的操作
- 调整主机唯一校验规则
- 操作审计默认查询时间为当天

**缺陷修复**
- 修复权限中心主机回调接口主机查询分页失败的问题
- 修复转移主机到直接新建的模块下时，会新增两个重复服务实例的问题
- 修复跨业务转移主机无权限操作时不显示权限窗口的问题
- 修复模块新增主机时手动输入ip不同云区域下相同IP仅录入一条数据的问题

## [Version: 3.9.9] - 2020-11-02
**Note**
该版本中新增了添加唯一索引的upgrader，若migrate脚本执行失败，需要处理完数据，确保数据正确后，再参考
如下链接重新执行该upgrader，直到migrate能正常执行。
链接：https://github.com/Tencent/bk-cmdb/issues/4757

**新增功能**
- 操作系统类型设置为可编辑
- 增加帮助文档地址配置
- 业务主机详情支持编辑服务实例进程
- 主机详情拓扑支持切换单列/双列显示
- 主机详情拓扑支持跳转新页面
- title配置根据版本进行初始化
- 升级程序增加cc_HostLock表
- 新增配置发现功能在adminserver侧做参数校验
- 新加所有表的唯一索引upgrader
- metrics 添加 appcode 字段

**功能优化**
- 主机转移使用批量操作
- 优化事件gc逻辑
- 子页面无操作路径记录场景下默认可回退至关联导航页
- 优化服务注册的逻辑，在http服务listen后，再注册服务
- 负载均衡策略优化
- UI使用新版主机选择器
- 服务分类显示ID
- 服务分类加搜索和添加二级分类交互优化
- apiserver中鉴权的body性能优化
- 修改间隔时间窗口为整时开启
- 支持根据操作审计id批量查询审计详情
- 动态分组表单兼容旧数据的显示
- 优化事件监听接口在异常场景下的处理逻辑, 挂起500ms后返回

**缺陷修复**
- 修复时间类型错误
- 云同步的写操作使用相应环境的开发商 ,修复云同步任务历史记录以及云主机查询不到的问题
- 修复flow watch内存泄漏的问题
- 修复3.2有存量主机数据时因为ip字段不匹配导致数据升级失败的问题
- 事件监听保留最后一个事件，修复所有事件均超时后使用cursor监听失败的问题
- 修复reflect.TypeOf()未判断结果是否为nil导致后续调用函数panic的问题
- 修复当配置redis前置中关于redis的配置不是第一个InitClient的时候无法连接导对应redis的问题

## [Version: 3.5.40] - 2020-10-21
**功能优化**
- 对datacollection在采集数据时进行防抖处理优化
- 修改原先的依照模型实例删除关联关系的接口，改为按照id批量删除关联关系
- 主机表和云区域表增加bk_cloud_id索引

**缺陷修复**
- 修复查询主机列表接口因集群查询结果为空没提前返回导致查询结果不对的问题
- 修复SearchHost逻辑中未能正确判定数据是否不存在的bug

## [Version: 3.9.8] - 2020-10-21
**新增功能**
- 支持跨业务转移主机，在不同业务的空闲机池间转移
- 新增执行指定migrate版本的升级程序
- 增加查询实例所有关联的接口(将实例视为关联源模型和关联目标模型)
- 动态分组查询条件模块属性支持服务模板筛选
- 升级redis driver为go-redis
- 支持sentinel加密配置
- datacollection添加时间窗口功能
- 增加获取各云区域下主机数量的接口
- coreservice增加获取mongo任意表字段dintinct值的通用接口

**功能优化**
- 将webserver的404错误重定向到定制的404页面
- 对eventServer使用kit方式接入服务
- 主机更新创建时对bk_cloud_id做校验，必须为数值型
- 优化从URL中匹配bizID的方式,使其匹配更精准
- 业务拓扑表格字段显示仅固定ID/IP/云区域字段
- DAL层创建索引时忽略索引已存在的错误，后续创建索引时无需判断索引是否存在
- 动态分组数据迁移规则更新
- 为缺少bk_biz_id字段的公共属性增加bk_biz_id字段且值为0
- search_inst_by_object 和 get_biz_internal_module 接口优化，去除查询模型的操作
- 优化ListProcessInstancesNameIDsInModule接口

**缺陷修复**
- 修复因supplierID不同导致云资源同步不成功的问题
- 修复动态分组范围类的查询条件编辑时表单渲染错误的问题
- 修复云资源发现新建任务账号禁用提示语错位的问题
- 修复动态分组选择属性筛选功能无效的问题
- 模型管理跳转主机资源池时切换到'全部'页签
- 修复资源池复制业务拓扑数据失败的问题
- 修复实例筛选出现重复的ID属性的问题
- 修复首页mac os环境下快捷搜索无效的问题
- 修复主机搜索和动态分组主机搜索逻辑中未能正确判定数据是否不存在的bug
- 修复权限中心反向拉取时因为没有设置用户导致查询失败的问题

## [Version: 3.9.7] - 2020-10-13
**新增功能**
- 调整了动态分组功能形态，支持主机、集群等的动态查询能力
- 增加通过集群模版查询服务实例列表的接口
- 添加mongo中的超时时间配置
- 新加支持根据服务名发现服务功能
- 权限中心回调接口支持按名字查询实例

**功能优化**
- 首页mac系统支持command + enter快速搜索
- 补充通过集群模版查询服务实例列表集成测试用例
- 将es在websever和toposerver的配置抽取出来，进行公共配置
- 服务分类名称重复创建后报错提示优化
- 服务模板列表支持部分字段排序
- 空业务列表查看提示语优化
- 主机页允许批量编辑已分配的主机

**缺陷修复**
- 修复获取拓扑节点路径的接口在集群的上一级为业务的时候不设置集群名字的问题
- 修正以host为关联关系原模型时，删除实例操作没有检测到其存在关联关系的问题
- 修复用户传多次相同节点时执行多次反向排序导致查询的拓扑路径顺序错误的问题
- 修复云账户列表默认查询无数据的问题
- 修复主机页面资源池目录不显示的问题

## [Version: 3.5.39] - 2020-10-13
**新增功能**
- 添加mongo中的超时时间配置

**功能优化**
- 优化search_host接口
- 优化list_biz_hosts_topo接口
- 优化list_service_instance_detail接口
- 优化search_biz_inst_topo接口
- 优化search_cloud_area接口
- 优化get_biz_internal_module接口
- 优化search_inst_by_object接口

**缺陷修复**
- 修正以host为关联关系原模型时，删除实例操作没有检测到其存在关联关系的问题

## [Version: 3.5.38] - 2020-09-25
**功能优化**
- 让查询模型实例、查询模型实例关系、操作审计相关的接口走从db

**缺陷修复**
- 修正不正确的采集器上报数据处理逻辑

## [Version: 3.9.6] - 2020-09-24
**新增功能**
- 增加查询业务下模块的接口,可跨多个集群查询
- datacollection变更字段可以根据环境配置
- 新增根据集群ID和服务模版ID查询模块的接口
- 权限解析获取资源池业务和默认目录ID支持多开发商
- 增加验证yaml文件工具功能，可以指定文件进行验证
- 添加批量获取新序列号的函数

**功能优化**
- 不指定模糊查询的情况下，查询接口默认使用精确匹配查询
- 对datacollection在采集数据时进行防抖处理优化
- 资源池支持按业务属性筛选主机
- 内置字段允许修改单位及提示,模型关系查看关联关系显示关联类型，服务模板、集群模板列表添加ID列
- 查询拓扑节点路径的接口过滤掉不存在的模块
- 更新项目架构图和代码架构图及其描述
- 移除prometheus metric 采集返回的appCode、realIp、user字段
- 优化服务实例查询性能
- 优化list_hosts_topo 获取全量主机的逻辑
- 运营统计和操作审计相关接口读取数据走从db
- 主机身份，list_hosts_topo 走 mongodb 从节点获取数据
- 将authserver中操作的查询数据方法放到mongodb的从节点中执行
- 将/api/v3/hosts/list_hosts_without_app操作的查询数据方法放到mongodb的从节点中执行
- 查询云区域时不同步查询其下的主机数量，加快页面响应速度

**缺陷修复**
- 修正处理采集器上报数据的逻辑，避免数据回滚问题
- 修复切换拓扑节点时未重置url筛选参数的问题
- 解决服务分类二级服务分类名称重复问题
- 修复权限解析获取资源池时会包含0开发商的问题
- 修复编辑模板进程绑定信息保存无效的问题
- 修复获取默认资源池目录ID错误的问题
- 修复移除metadata导致导入模型字段失败的问题
- 修复有部分模型权限时无法批量更新这些模型的问题
- 修复无变更时模板要求同步的问题
- 修复收藏条件应用无效的问题
- 修复运营统计新增图标UI异常的问题
- 修复新增一级服务分类时中断流程可能引起的UI异常的问题
- 修复当主机没有安装agent时，快照实时页面显示不对的问题

## [Version: 3.5.37] - 2020-09-14
**功能优化**
- adminserver权限资源同步支持读写分离

## [Version: 3.9.5] - 2020-09-09
**功能优化**
- 操作审计优化
- 资源池显示主机拓扑路径及支持主机转移模块
- 调整synchronizeserver和cloudserver的健康检查接口
- 查询主机业务关系接口增加对入参bk_host_id的校验
- 调整批量查询主机快照的数量限制为200
- 去除资源池主机、模型实例的新建关联权限
- 主机的 display_name 调整为IP(云区域名)的形式
- 调整查询动态分组鉴权方式

**缺陷修复**
- 修复 fetch_instance_info 仅返回20条数据的问题
- 修复设置蓝鲸拓扑可编辑接口鉴权失败的问题
- 修复权限回调接口查询主机时使用分页缓存查询传递了所有hostID导致返回全部数据的问题

## [Version: 3.8.14] - 2020-09-09
**新增功能**
- 进程绑定信息的子字段设置为必填且支持分组
- 进程模版绑定支持第一内网、第一外网IP

**功能优化**
- 优化重构服务实例进程编辑组件
- hostserver的方法统一通过kit获取相关信息
- list_hosts_without_biz 删除排序字段，所有的请求都是用bk_host_id 排序
- 优化拉取全量主机场景， 使用cache中的数据

**缺陷修复**
- 修复业务实例变更记录里包含非该业务实例相关记录的问题
- 修复当主机没有安装agent时，快照页面显示不对的问题
- 修复模型自关联时，实例关联重复显示的问题
- 修复全文检索输入框UI异常的问题
- 修复通过模板新加进程的时候没有同步进程绑定信息的问题

## [Version: 3.5.36] - 2020-09-04
**新增功能**
- 新增查询实例所有关联的接口
- 新增删除实例所有关联的接口

**功能优化**
- 对于导出主机生成的excel表格，增加内存容量单位(MB)
- 调整错误码

**缺陷修复**
- 修复无法删除模型属性的枚举字段的问题

## [Version: 3.8.13] - 2020-09-01
**注：全文检索数据同步方案调整，与原有方案不兼容，需要调整部署方案**

**新增功能**
- 资源池主机列表支持显示业务拓扑
- 添加查询拓扑节点下的主机接口

**功能优化**
- 优化主机快照存储逻辑，减少快照存储大小
- 主机自动应用性能优化
- 替换原有mongo同步es方案，升级elastic包到v7，调整全文索引逻辑
- 模型自关联取消无意义的1-N关联
- 业务、通用模型实例支持按ID搜索
- 首页主机搜索均跳转至资源池
- 资源池支持已分配主机转移
- 进程、进程模板中的端口一行不再支持非连续的端口
- 删除主机改为批量操作
- 事件服务重构优化，底层处理调整为watch方式，提高整体扩展性和处理性能
- 对于导出主机生成的excel表格，增加内存容量单位(MB)
- 优化Decode2Struct导致的性能问题

**缺陷修复**
- 修复运营统计新增跟编辑图表配置时弹窗无遮罩的问题
- 修复导出有实例关联的实例时报错解析授权信息失败的问题

## [Version: 3.9.4] - 2020-08-25
**功能优化**
- 资源池主机显示ID
- 主机收藏跳过鉴权
- 添加业务拓扑等新建操作的关联权限
- 主机转移鉴权使用服务实例增删改权限

**缺陷修复**
- 修复主机详情查询属性参数错误的问题
- 修复云账户编辑后表格数据未同步刷新的问题
- 修复实例表格字段显示设置还原默认时状态未重置的问题
- 修复模型实例无法搜索非实例名字段的问题
- 修复编辑服务模板时未选择二级服务分类可以提交的问题
- 修复在云资源任务中新建资源目录后未刷新权限状态的问题
- 修复模型导出时获取模型信息接口鉴权解析要求业务ID不为0的问题
- 修复主机自动应用包含组织字段导致应用失败的问题

## [Version: 3.5.35] - 2020-08-20
**功能优化**
- 主机身份加回bk_supplier_id字段，兼容GSE

## [Version: 3.9.3] - 2020-08-19
**新增功能**
- 模型增加ishide字段，bk_ishidden字段等于true的模型不在前端界面展示

**功能优化**
- 移除metadata字段相关逻辑和升级db数据，去除老版本业务私有数据对该字段的兼容
- 前端前置鉴权优化

**缺陷修复**
- 修复查询云资源任务权限未传实例ID的问题
- 修复云区域地域请求报错的问题

## [Version: 3.8.12] - 2020-08-17
**新增功能**
- 添加集群模版事件监听功能

**功能优化**
- 补充api限流工具使用说明
- list_host校验fields为必填

**缺陷修复**
- 修复upgrader里模块的host_apply_enabled字段生成ID时使用了object表的问题
- 修复find_module_host_relation接口没有主机时未返回的问题
- 修复bk_supplier_id跳过校验和int类型校验string可以通过的问题

## [Version: 3.5.34] - 2020-08-17
**功能优化**
- 优化与权限中心进行资源同步的策略，延长同步周期，降低db压力
- 移除业务模型中的bk_supplier_id字段

**缺陷修复**
- 修复导入模型excel存在内置字段而报错的问题
- 修复bk_supplier_id数据类型为字符串的问题

## [Version: 3.9.2] - 2020-08-13
**新增功能**
- 添加set_template事件监听权限

**缺陷修复**
- 修复动态分组对应权限中心视图配置错误的问题
- 修复获取redis和mongo配置产生的异常

## [Version: 3.9.1] - 2020-08-11
**新增功能**
- 对接新版权限中心，与原有v3.8以下权限管理方式不兼容
- 新增云资源管理功能
- 配置文件调整为yaml格式

## [Version: 3.8.11] - 2020-08-10
**新增功能**
- 支持进程绑定多个端口
- 新增事件stream支持获取字段变更的详情，即可以看到哪些字段发生了变更触发了事件

**功能优化**
- 增加用户类型模型属性的正则校验
- 组织组件兼容不存在的数据及支持focus
- 优化验证组件初始化时机
- 事务方法内出现panic后进行回滚，防止未提交的相同数据在另一个事务中出现写冲突

**缺陷修复**
- 修复主机IP+云区域ID查询跳转页面时参数错误的问题

## [Version: 3.8.10] - 2020-08-03
**新增功能**
- 新增查询业务、集群、模块、主机的缓存接口
- 增加集群和模块创建是否要使用模版的控制选项

**功能优化**
- 提供URL供其他系统跳转，根据IP + 云区域ID(可缺省)查看主机详情
- UI交互细节优化
- 优化动态分组查询条件取值逻辑
- 事件推送性能优化
- 优化模型管理操作按钮鉴权时机解决打开页面卡顿问题

**缺陷修复**
- 修复coreservice的panic
- 修复同步集群模版时的异常报错
- 修复删表操作导致进程使用watch服务时CPU高的问题
- 修复excel导入模型实例失败的问题
- 修复excel导入主机时，组织类型字段参数校验失败的问题
- 修复批量创建集群失败的问题

## [Version: 3.8.9] - 2020-07-15
**新增功能**
- 新加add host接口修改主机时不能修改云区域
- 新加批量修改主机的接口不能修改云区域

**功能优化**
- 优化事件监听逻辑，特别是在无事件时，返回无事件通知，避免抛出异常
- 调整了事件游标的encode, decode逻辑，使产生的游标更容易识别
- 更新开源CMDB替换社区版文档，CMDB编译指南文档中的配置文件列表以及进程信息
- 优化服务下线逻辑

**缺陷修复**
- 修复logout清除session没有调用save保存的问题
- 修复重复执行upgrader程序导致重复创建外网代理等属性的问题
- 修复add host接口新加主机可以使用不存在云区域的问题
- 修复add host接口新加主机中云区域ID为字符串的问题
- 修复在未配置paas URL的情况下配置了新版人员选择器URL导致使用新版人员选择器的问题
- 修复业务拓扑搜索后无法选择节点的问题
- 修复非服务模板创建的模块添加主机时无法编辑进程的问题
- 修复主机身份事件中process_name为空的问题
- 修复带IP的主机结构体数组校验时panic的问题

## [Version: 3.2.26] - 2020-07-10
**缺陷修复**
- 修复动态分组保存multilike值不为数组的问题
- 修复搜索界面因未返回第一页搜索，导致搜索不到实例的问题

## [Version: 3.5.33] - 2020-07-10
**新增功能**
- 新加add host接口修改主机时不能修改云区域
- 新加批量修改主机的接口不能修改云区域

**功能优化**
- 主机快照硬盘计算优化

**缺陷修复**
- 修复add host接口新加主机可以使用不存在云区域的问题
- 修复add host接口新加主机中云区域ID为字符串的问题

## [Version: 3.8.8] - 2020-07-07
**功能优化**
- 主机事件监听，兼容将数组数据转换为字符串
- 优化人员选择器使用场景
- 去掉配置管理的查询鉴权

**缺陷修复**
- 修复主机信息excel导出失败的问题
- 修复集群模板最后同步时间展示错误的问题
- 修复类型错误的实例字段值对应的表单组件无法渲染的问题

## [Version: 3.8.7] - 2020-07-01
**重要说明**
- 该版本会对主机表cc_HostBase进行变更，变更期间需要停服发布

**新增功能**
- 主机表cc_HostBase数据结构变更,主机IP、维护人等字段从字符串调整为数组
- 查询集群模板同步状态时更新正在同步集群的状态
- 派生新的rest.Contexts, rest.Kit和header对象用于处理事务中多协程并发的情况
- 增加创建cc_DelArchive的升级程序
- 增加配置管理功能
- 对业务拓扑最大层级和主快照业务名进行配置管理
- hostserver的所有写接口支持事务
- 添加根据模块ID查询主机和模块关系接口
- 添加不允许更新不可编辑字段的校验
- 新增除业务和资源外的其他板块操作审计
- 限制创建模型字段不能以"_bk_"、"bk_"开头
- 使用蓝鲸公共人员选择器组件 （依赖PaaS 2.10.45+）

**功能优化**
- 服务实例筛选自动补全标签值对应的key
- 模块新增主机编辑模板进程显示加锁效果
- 异步任务接入事务
- 下线auth parser里在topolatest有替换接口的接口
- 修改导出实例的excel字段排序逻辑，唯一校验字段优先排序
- 增加业务拓扑排序逻辑，中文按拼音排序
- webserver提供读取用户管理的ESB接口地址配置

**缺陷修复**
- 修复服务实例多IP无法复制的问题
- 修复实例添加进程后列表进程信息未更新的问题
- 修复主机详情跳转指定拓扑节点失效的问题
- 主机属性自动应用去掉不可编辑的docker版本字段
- 将主机属性SLA级别改为可编辑，可使用主机属性自动应用
- 修复查询主机关系时fields不生效的问题
- 修复导入蓝鲸业务拓扑配置失败的问题

## [Version: 3.5.32] - 2020-06-30
**功能优化**
- 业务拓扑排序时中文按拼音排序

**缺陷修复**
- 修复 discovery.GetServer() 并发读写导致 panic 的问题
- 修复 cc:v3:event:inst_queue 数据过多导致 redis OOM 的问题

## [Version: 3.8.6] - 2020-06-17
**新增功能**
- 增加批量查询主机快照的接口
- 增加根据进程ID批量更新进程实例的接口
- 增加查询模块下的进程名和对应进程ID列表的接口
- 增加根据进程ID列表批量查询进程详情的接口
- 增加查询服务模板下的主机接口
- 增加查询集群模板下的主机接口
- 服务实例新增进程视图，提供进程批量编辑功能
- datacollection支持分布式模式
- 增加datacollection模块压测工具

**功能优化**
- 查询主机关系时限制返回字段

**缺陷修复**
- 修改搜索界面因未返回第一页搜索，导致搜索不到实例的问题
- 修复用户名中带.的用户的展示属性写入mongodb时会被解析为多层的问题
- 取消转移主机的服务实例存在性校验
- 解决根据业务查主机时，集群名过滤条件不生效的问题
- 修复watch里gc回收head与tail直接全部的节点导致tail指向不存在节点的问题
- 动态分组下拉框无法使用问题
- 修复datacollection模块因全局CCError对象未能正确初始化产生panic的问题

## [Version: 3.5.31] - 2020-06-17
**功能优化**
- 模型实例侧滑详情标题溢出显示优化

**缺陷修复**
- redis配置解析错误修复
- 修复用户名中带.的用户的展示属性写入mongodb时会被解析为多层的问题

## [Version: 3.5.30] - 2020-06-12
**新增功能**
- 所有redis配置支持redis sentinel特性,配置mastername则使用sentinel功能

## [Version: 3.8.5] - 2020-06-09
**新增功能**
- mongodb dal新加distinct操作
- coreservice 新加根据拓扑条件使用distinct来获取满足条件的主机
- 新增业务、集群、模块watch事件通知
- coreservice新增批量查询主机缓存数据接口

**功能优化**
- 主机IP、维护人从字符串调整为数组
- 主机快照失效时间新增随机策略，避免短时间大量数据操作
- 错误页面显示方式等体验问题优化
- 模型管理搜索忽略大小写
- 模块主机接口优化
- 优化hostserver查询主机获取限定条件下主机id
- 增加审计日志page limit的校验
- 审计日志只记录模型的公共属性，不记录业务下的私有属性

**缺陷修复**
- 修复转移主机时进程删除失败的问题
- 动态分组缺陷问题修复
- 修复导入excel更新主机时需要全局主机编辑权限的问题
- 修复拓扑节点信息编辑信息溢出导致操作选项不可见的问题
- 修复创建没有附带进程的服务模板失败问题
- 补全进程实例与模版同步中差异对比所缺失的网管代理字段

## [Version: 3.5.29] - 2020-06-02
**功能优化**
- 增加审计日志分页limit参数的校验
- 查询已归档业务时，忽略大小写

**缺陷修复**
- 修复导出主机excel时未包含自定义业务拓扑层级信息的问题

## [Version: 3.8.4] - 2020-05-27
**新增功能**
- 增加批量查询某业务下集群详情的接口
- 首页主机搜索支持固资编号
- apiserver新增服务降级能力
- 增加批量查询某业务下模块详情的接口
- 增加模型操作审计
- 添加服务实例接口增加主机自动应用冲突处理
- 新增主机到模块添加确认自动应用属性tab页
- redis driver提供healthz接口给metric 使用
- mongodb driver提供healthz接口给metric 使用
- procserver的所有写接口支持事务
- toposerver的所有写接口支持事务
- metrics新增appcode,user等label信息
- 主机属性增加docker版本字段
- mongodb driver新加DropDocsColumn方法，用来根据条件删除document的column
- 新加warnJSON用来写入warn日志
- apiserver入口处增加请求信息日志
- 添加自定义字段审计字典
- webserver添加蓝鲸桌面配置
- 在stream 功能中新增根据token进行事件回溯的能力
- 新增watch事件功能，使得第三方服务可以通过watch机制获取cmdb中的数据变化
- datacollection新加默认业务名配置
- healthz依赖组件更新
- 新增coreservice主机缓存管理能力
- cc_ServiceTemplate、cc_ProcessTemplate、cc_ServiceInstance表添加索引
- 开源版简易登录
- 查询主机列表的接口支持传入host 的字段列表，只返回列表里的字段数
- 新增业务拓扑树搜索功能
- 业务导航URL调整
- 事件推送支持事务
- 新增主机转移失败重试功能
- 新增基于mongodb的分布式事务支持框架

**功能优化**
- 主机快照上报不支持IPV6, 新增对未注册到cmdb的主机快照过滤，降低缓存穿透
- 主机身份推送优化，采用新的缓存服务
- 调整zk的session timeout到40秒
- topoinst接口性能优化
- 复制服务实例IP添加合法性校验
- 调整通用表单label行高
- 集群模板列表添加排序功能
- 创建模块-服务模板列表按名称排序
- 导入文件大小显示格式优化
- 面包屑与动态分组属性名称等长文本超出显示处理
- 优化数值类型数据是否为空的判断
- 优化服务注册uuid字段的配置策略
- 对数据采集快照中的多ip情况进行处理
- 调整事件监听的返回协议，优化处理效率
- 新增tool工具支持watch资源变化，支持filter过滤
- 主机快照小工具中datacollection的redis配置从redis.conf中读取
- 精细化实例鉴权
- 事件订阅的operation字段改为statistics
- 统一返回请求id功能
- 收敛请求id的生成位置
- 事件订阅的operation字段改为statistics，和3.5版本保持一致
- 补充业务拓扑节点信息编辑中的集群和模块名称校验
- 优化主机查询接口的查询性能
- 主机缓存逻辑中，去掉去oid key的操作与管理
- coreservice事件流优化，新加对主机事件的合法校验
- 优化主机与动态分组多集群多模块搜索
- 主机详情鉴权精细化
- 将gin的运行模式从debug改为release
- 修改adminserver的数据库连接数配置
- 首页IP搜索添加按钮loading效果
- 优化主机缓存管理逻辑，去掉去oid的管理
- coreservice flow watch管理优化，新增分布式锁管理。调整过期事件的淘汰策略
- 优化确认转移主机的loading显示效果
- cc_ProcessInstanceRelation添加索引
- 服务模板同步接口性能优化
- 主机属性自动应用批量操作添加校验
- 修改事务方法的err返回值，删除无用的事务初始化配置
- 优化跳转至业务拓扑界面的性能
- 修复业务自定义字段判重条件错误的问题
- find_host_by_module接口支持传入host的字段列表，只返回列表里的字段数
- datacollection中主机快照逻辑优化
- 服务模板同步去掉服务模板名和绑定的模块名不一致的校验
- 主机自动应用批量操作菜单icon改为文字
- 资源目录显示实例具体数值
- 导入上限修改为20M
- 新增表头字典文件并统一提取进程列表表头
- 完善动态分组查询条件支持多选
- 业务导航URL优化
- 搜索跳转优化
- ListServiceTemplatesWithDetails接口性能优化
- relector与stream框架新增支持list与liser操作
- 前端审计与服务模板优化
- 列表枚举等字段组件在创建动态分组时支持多选
- 服务实例标签筛选显示名称优化
- 修复业务拓扑添加条件时遮盖层问题
- 主机筛选与关闭按钮样式优化
- 详情中的属性值溢出时使用tooltips提示
- 添加服务模板中的模板名称tooltips优化
- 主机详情中服务列表无服务实例样式优化
- 主机查询相关接口优化
- 模型的枚举和列表字段选项值支持排序
- 主机搜索相关接口的优化
- 允许进程名称重复
- 多供应商支持的优化
- 修改业务拓扑中节点数量显示为具体的数值
- 模型的枚举和列表字段选项值支持排序
- search_object_topo请求方法调整为post
- 完善主机ip搜索
- 删除集群模板的提示框排版样式优化
- 服务模板中的实例列表不可以同步提示信息优化
- 修改错误页面的显示方式为保留路由地址以支持刷新时能正常显示

**缺陷修复**
- 查询已归档业务时，忽略大小写
- 复主机详情服务列表未注入权限数据的问题
- 修复动态分组主机查询fields设置错误和多选值逻辑优化
- 修复查询主机身份接口返回数据嵌套的问题
- 修复几个panic相关的问题
- 修复业务修改鉴权错误
- 修复切换业务时查询条件未重置的问题
- 修复login组件引起在safari假死的问题
- 补充自定义层级的实例名称校验和模型字段分组名称长度限制调整
- 调整主线模型中事务处理的错误返回
- 修复无法通过redis在配置文件的前缀获取对应redis实例的问题
- 删除主机属性时同步删除主机自动应用
- 修复添加编辑进程启用端口字段不生效问题，启用端口字段id统一为bk_enable_port
- 修复模块节点信息编辑时服务分类重复的问题
- 修复excel导入模型属性无效的问题
- 修复使用组织类型字段在业务拓扑主机筛选时不正确问题
- 修复创建通用模型实例/业务时传递了自定id的问题
- 修复业务归档操作disabled态点击会跳转详情问题
- 动态分组弹窗中页码下拉遮挡问题
- 修复set_template_version属性时间值为空的问题
- 修复模型字段分组名称长度保存未限制的问题
- 修复模型字段值得显示会出现undefined的问题
- 修复模型字段分组名称长度保存未限制的问题
- 修复set_template_version属性时间值为空的问题
- 修复转移主机错误时返回转移成功的问题
- 修复人员选择器在内容过长下宽度异常导致无法点击到保存操作
- 修复操作审计bson序列化时多一层的问题


## [Version: 3.2.25] - 2020-05-13
**缺陷修复**
- 对于ESB接口调用失败的情况，增加增删实例关联关系的接口路由
- 修复因类型转换失败导致的Excel更新模型实例不全的问题


## [Version: 3.5.28] - 2020-05-13
**功能优化**
- 查询主机列表的接口支持传入host的字段列表，只返回列表里的字段数
- 权限中心同步时拉取coreservice改为分页拉取
- 优化事件的回调方法
- 将多个redis命令用管道进行处理
- 对已取消订阅用户的回调记录进行删除

**缺陷修复**
- 修复分页判断条件错误的问题
- 修复对已发送的用户订阅事件进行过期删除的逻辑
- 修复删除实例时权限解注册不正确的问题


## [Version: 3.2.24] - 2020-04-29
**新增功能**
- 增加查询模型实例关系的api路由

**缺陷修复**
- 修复excel导入模型实例不全的问题
- 修复同步的主机外网Mac地址与采集数据不一致的问题


## [Version: 3.8.3] - 2020-04-27
**新增功能**
- 事件推送支持事务
- 新增主机转移失败重试功能
- 新增基于mongodb的分布式事务支持框架

**功能优化**
- 主机搜索相关接口的优化
- 允许进程名称重复
- 多供应商支持的优化
- 修改业务拓扑中节点数量显示为具体的数值
- 模型的枚举和列表字段选项值支持排序
- search_object_topo请求方法调整为post

**缺陷修复**
- 修复模型字段分组名称长度保存未限制的问题
- 修复set_template_version属性时间值为空的问题
- 修复转移主机错误时返回转移成功的问题
- 修复人员选择器在内容过长下宽度异常导致无法点击到保存操作
- 修复操作审计bson序列化时多一层的问题
- 修复查询模型实例接口map为nil时赋值导致的panic


## [Version: 3.2.23] - 2020-04-22
**功能优化**
- session缓存大小设置为1M 

**缺陷修复**
- 修复有权限普通用户修改实例显示无权限的问题
- 修复用户成功修改实例后，没有跳转页面的问题
- 修复操作审计中选择模型下拉列表没有主机选项的问题

## [Version: 3.5.27] - 2020-04-17
**新增功能**
- 允许用户修改系统初始化字段的提示/单位/枚举等数据

**功能优化**
- 更改短字符和长字符的类型要求，变更为"除空格符外所有类型"
- 优化event client中数据过多处理不过来，丢事件的处理逻辑，避免haung住

**缺陷修复**
- 修复权限同步判断主线实例条件错误
- web内置字段更新不提交名称字段
- web修复批量更新未勾选必填字段也会进行校验的问题
- web修复模型关联/唯一校验表格最大高度设置不正确的问题
- 将服务模版同步时空指针导致的问题


## [Version: 3.8.2] - 2020-04-17
**新增功能**
- mongodb支持配置副本集名称
- 进程管理增加网关相关配置
- 新增跨业务转移主机功能，并新增对应的权限管理。
- 查找主机的高级筛选里支持集群、模块等模型属性值忽略大小写的模糊匹配
- 业务拓扑主机搜索支持按照模块的服务分类搜索
- 模型关联类型搜索支持清空和动态分组预览支持复制IP
- 新建集群模板支持全选服务模板
- 模型字段支持“组织”


**功能优化**
- 优化主机转移审计，主机转移等待全部转移完成后再记录审计
- 创建模型关联UI统一和导入字段交互优化
- 操作审计筛选条件排版优化并且加上清空按钮
- 模型关联创建添加关联效果示意图
- 业务列表增加归档操作
- 实例关联无数据提示完善
- 调整获取组织接口的协议
- 进程中将字段bk_port_enable改成bk_enable_port
- 属性字段长度调整
- 操作审计协调优化，去掉basic_detail
- 增加模型唯一校验规则的重复检查 
- redis配置统一使用masterName判断是否使用sentinal，使用host配置地址
- 模型关联类型查看状态不显示操作按钮和效果示意关联名称过长遮挡优化
- 增加自定义拓扑节点审计动作表
- 主机集群/模块名称支持模糊查询
- 实例筛选属性排序增加唯一校验判断
- 新建实例必填字段增加唯一校验判断
- 调整模型字段创建校验规则


**缺陷修复**
- 修复修改不允许修改的属性的描述，但excel表中并未做修改的问题
- 修复缺少自定义拓扑节点审计动作字典的问题
- 修复升级日志json数据重复显示的问题
- 修复升级日志json数据重复显示的问题
- 修复拓扑节点信息重复显示模板信息的问题
- 调整审计日志数据读取路径
- 属性自动应用拓扑树批量编辑筛选交互优化

## [Version: 3.8.1] - 2020-04-10
**新增功能**
- 模型属性增加组织部门字段类型，提供查询部门列表和部门人员信息的接口
- 进程启动监听地址支持IPV6，zk注册发现地址支持域名
- 新增事务支持功能，使用新的mongo-driver
- 新加excel导入更新主机功能
- 添加mongodb事件监听功能
- 根据服务模板ID查模块接口支持按模块列表查

**功能优化**
- 支持模型在列表页表格中的头部字段，允许自定义默认的展示的字段及顺序
- 调整业务归档策略
- 模型字段校验调整，取消特殊字符校验，添加枚举等字段的校验
- coreservice和toposerver使用通用的rest框架
- 操作审计协议调整，get_operation_log接口协议变更
- 模型实例详情侧滑改为页面，模型实例属性修改交互改为与主机一致
- 实例关联页面修改为与主机一致，优化无数据时UI展示 
- 登陆组件调整，并将用户相关接口从登陆插件中移除
- 新加支持开源版本使用免登陆模式，admin账户登录系统模块
- mongodb连接数配置项生效，添加复制集名称配置项
- 调整配置文件和进程获取配置的方式

## [Version: 3.7.7] - 2020-04-09
**功能优化**
- 删除业务自定义拓扑的同时删除集群同步状态

**缺陷修复**
- 修复服务模板同步，服务分类变更左侧不提示数量的问题
- 修复统一表单元素未限制最大宽度的问题
- 修复模型字段详情备注字段读取错误的问题
- 修复服务模板同步内容去重及字段格式化错误的问题
- 修复业务主机操作实例关联时提示无全局主机编辑权限的问题

## [Version: 3.5.26] - 2020-04-09
**功能优化**
- list_biz_hosts接口默认按host id排序
- 1s未收到服务变更事件时从zk读server数据并做对比
- 模型属性中bk_property_group为none的改为default
- 内置字段允许编辑
- 连接mongodb的时候， 执行ping，保证base session 中masterSocket 可用

**缺陷修复**
- 修复find_host_by_module接口中的page参数无效的问题
- 修复操作审计数据库字段错误的问题
- 修复权限同步时主线实例被注册为模型实例的问题
- 修复excel导入实例关联时多主机只有第一条成功的问题
- 修复zk二次关闭的问题
- 修复更新实例接口事件推送超时的问题
- 修复将服务模版字段清空后进行同步出现空指针异常的问题

## [Version: 3.7.6] - 2020-04-07
**缺陷修复**
- 修复服务模板实例同步显示异常的问题
- 修复创建服务模板时名称显示异常的问题
- 修复创建拓扑节点时服务分类切换错误的问题

## [Version: 3.7.5] - 2020-04-03
**功能优化**
- 主机转移功能性能优化
- 主机转移接口同时删除移出模块的服务实例 
- 服务模板名称支持修改
- 根据服务模板查询模块接口在无分页参数时返回全部数据
- 服务模板实例允许批量同步
- 优化主机选择器交互，允许未展示模块时进行全选
- 服务实例进程模板锁定字段添加表单提示
- 去掉服务模板同步变更内容中的进程名称
- 优化主机审计记录详情的业务显示
- 进程表格添加端口启用列
- 操作历史详情使用表格自带的溢出效果提示
- 服务分类正则添加括号
- 服务模板实例表格溢出添加滚动条

**缺陷修复**
- 修复服务模板修改进程模板的进程启用端口不触发同步的问题
- 修复服务模板修改的服务分类在同步时未同步到模块的问题
- 修复服务分类删除tips出现位置错误和主机属性编辑状态布尔字段控件错位的问题
- 修复关联业务数据查询条件传空会返回所有有权限的业务列表的问题
- 修复转移主机确认时，进行IP排序后导致的存储参数不正确的问题
- 修复实例列表筛选条件选择偶现为空的问题
- 修复拓扑节点字段过多时，操作按钮溢出的问题
- 修复全文检索跳转业务未正确设置筛选条件的问题
- 修复主机属性自动应用冲突未正确显示业务字段的问题

## [Version: 3.7.4] - 2020-03-24
**功能优化**
- 页面上模型bool字段允许设置默认值
- 进程和主机身份新加启用端口属性字段
- 主机转移-变更确认tab样式调整
- 去除search biz topo接口多余的查询主机操作
-  更新magicbox版本及交互优化
-  页面新建模块时服务分类默认选中default

**缺陷修复**
- 修复bson decode time 错误的问题
- 修复list_service_instance_detail无进程信息的问题
- 修复拓扑节点信息过多导致按钮组看不见的问题
- 修复转移主机无权限时页面视图显示不正确的问题

## [Version: 3.5.25] - 2020-03-13
**功能优化**
- 前端模型属性枚举类型接口请求添加type字段
- 更新模型属性接口添加模型分组是否存在的校验
- 模型属性枚举类型新增枚举项长度和个数限制 
- 优化dal mgo类库使用session的方法
- 审计日志对比支持忽略字段
- apiserver请求日志增加app code
- 审计详情变更信息溢出显示优化

**缺陷修复**
- 修复主机自动发现时出现重复日志的问题
- 修复权限同步时json缺失tag和判断带父层级资源位置错误的问题
- 修复datacollection中map并发读写的问题

## [Version: 3.5.24] - 2020-03-04
**功能优化**
- 模型属性枚举类型添加id和name是否为字符串和type是否为text的校验

**缺陷修复**
- 修复删除实例失败时再删除提示无删除权限的问题

## [Version: 3.6.5] - 2020-02-26
**新增功能**
- 新增资源池主机查询接口
- 新增查询业务下主机与进程的关联信息接口及测试用例
- 添加db数据升级文档

**功能优化**
- 导出excel和页面展示模型字段排序调整
- 导出主机添加业务信息
- 更新cmdb的英文logo
- 长字符类型允许输入=
- 主机详情云区域信息展示优化
- 开发商ID相关调整
- 添加主机当前状态字段英文翻译
- 通用json反序列化调整大整数不使用科学记数法

**缺陷修复**
- 修复运营统计主机数量变化趋势图，定时器不生效的问题
- 修复模型属性排序，获取最大index时排序不生效的问题
- 修复查询不存在的模型属性报错的问题
- 修复更新主机时报"根据主机ID获取业务ID失败"的问题
- 修复运营统计图表创建/编辑时发起错误请求的问题
- 修复空闲机模块可以移除主机的问题
- 修复多窗口切换时，业务拓扑与当前选择业务不一致的问题

## [Version: 3.5.23] - 2020-02-26
**功能优化**
- 安装cmdb时，导入蓝鲸拓扑允许进程名，功能名不同
- http client tranpsort 支持使用系统配置的代理
- 模型属性bk_property_group为none的改为default
- 优化mgo client refresh session逻辑
- 查询模型属性接口性能优化
- 切换开发商，没有权限的操作的时候，返回对应信息
- 允许用户在没有权限的情况下进入到cc页面
- 添加模型关联类型字段国际化英文翻译
- 删除服务拓扑中无用的鉴权

**缺陷修复**
- 修复删除主机时可以删除有关联的主机的问题
- 修复并发场景下，属性和字段属性重复的问题
- 修复excel导入实例与主机关联失败，报错主机不存在的问题
- 修复进程模板进程名和进程功能名为空的问题
- 修复datacollection连接未关闭的问题

## [Version: 3.2.22] - 2020-02-26
**缺陷修复**
- 修复datacollection空指针异常和连接未关闭的问题

## [Version: 3.7.3] - 2020-02-19
**功能优化**
- metrics采集中有参数拼接的url合并为一个
- 优化关联类型筛选UI
- 主机详情标题提示语显示优化
- 关联类型表单文本溢出显示优化
- 主机转移的变更确认badge优化
- 删除业务拓扑中无用的鉴权
- 长字符类型允许输入=
- 主机详情云区域信息展示优化
- 主机属性自动应用模块名添加国际化

**缺陷修复**
- 修复get_biz_internal_module接口json序列化ModuleName错误的问题
- 修复添加业务字段时与全局字段名相同时可添加成功的问题
- 修复空闲机模块可以移除主机的问题
- 修复多窗口切换时，业务拓扑与当前选择业务不一致的问题

## [Version: 3.7.2] - 2020-01-13
**新增功能**
- 批量服务实例删除支持预览发生主机转移时的属性自动应用信息
- 安装cmdb时，放开蓝鲸业务对进程信息的校验
- http client tranpsort 支持使用系统配置的代理
- 主机实例支持设置业务自定义属性
- 主机跨业务转移时设置/清除业务自定义字段
- 新增资源池主机查询接口
- 新增db数据升级文档
- 支持已赋值的实例日期和时间类型字段的问题
- 服务发现支持1s定时服务信息对比与同步能力

**功能优化**
- 删除、转移主机展示属性应用信息
- 查看集群模板tab添加同步提示
- 前端界面交互与设计优化
- 人员选择器支持异步查询
- 优化属性自动应用搜索，放开字段类型限制
- 优化mgo client refresh session逻辑
- 完善业务私有字段与公有字段key互斥检查条件
- 支持容器化部署
- 全文检索连接es支持配置https与auth认证
- 模型字段排序调整
- 内置服务分类添加国际化支持
- 模型属性bk_property_group为none的调整为default
- 创建模型属性接口的返回值修改为最新数据
- 导出主机添加业务信息
- 查询不存在的模型属性返回空值不报错
- 优化并发场景下，加锁，避免新加模型和模型属性重复

**缺陷修复**
- 修复模块选择器/主机选择器生成模式下显示异常的问题
- 修复删除主机时可以删除有关联的主机和关联实例判断错误的问题
- 修复excel导入实例与主机关联失败，报错主机不存在的问题
- 修复更新主机报"根据主机ID获取业务ID失败"的问题
- 修复运营统计定时与编辑问题

## [Version: 3.6.4] - 2020-01-03
**新增功能**
- 支持业务下主机自定义属性功能。当set,module,host属性被删除后,实例中对应的字段也会被清除。
- 全文检索中ES支持配置auth信息。
- 支持属性字段排序功能。

**功能优化**
- 创建模型属性接口，返回值修改为最新数据。
- 完善业务私有字段与公有字段key互斥检查条件。
- 调整权限中心的事件订阅和云区域名称。
- 云区域查询跳过鉴权。
- 查询模型属性接口性能优化。
- 安装的cmdb的时候，放开蓝鲸业务对进程信息的校验。

**缺陷修复**
- 修复新建实例统计图表模型没有维度又是必填的问题

## [Version: 3.5.22] - 2019-12-26
**新增功能**
- cmdb_adminserver 配置蓝鲸业务可编辑
- cmdb_hostserver 提供查询蓝鲸业务是否可编辑接口 

**功能优化**
- 主机自动发现，添加操作日志
- 移除实例查询的鉴权
- 删除查询的时候字符“-”的转义操作
- UI：蓝鲸业务编辑判断
- 在http 调用的时候，不使用gzip 压缩

**缺陷修复**
- 添加部分遗漏的错误处理
- 修复模型字段属性排序问题

## [Version: 3.7.1] - 2019-12-25
**新增功能**
- 新增主机属性自动应用功能
- 添加离开确认UI组件
- 新增主机转移中属性自动应用预览功能
- 添加主机的外网ip唯一校验
- 业务拓扑树过滤规则支持exist匹配规则
- 新增主机属性自动应用的鉴权
- 属性自动应用添加面包屑回退功能 
- 添加主机转移/移除确认界面可二次编辑功能
- 新增集成测试
- 引入jsonpath用于解决测试步骤间数据引用问题
- 集群及模板支持版本号
- 数据库新增集群版本字段，并设置集群模板和集群版本默认值
- 新增查询集群模板是否需要同步的接口
- 添加主机转移/移除确认界面可二次编辑功能
- 新增批量检查集群同步状态接口

**功能优化**
- 主机详情编辑状态判定
- 属性应用拓扑筛选完善
- 主机详情拓扑路径优化
- 添加字段样式优化
- longchar组件改用多行文本框
- 模型实例添加id表头
- 属性输入验证和配置时展示所有模块路径
- 过滤没有配置属性自动应用的数据
- 服务模板新建弹窗提示优化
- 简化属性自动应用拓扑搜索功能
- 发生主机转移时自动根据属性自动应用规则更新主机属性
- 主机转移及转移预览生成主机应用计划时过滤掉未启用的模块
- 内置模块支持主机属性自动应用
- 更新字段信息和冲突信息默认按照字段名排序
- 优化批量操作返回结果
- 主机属性编辑时自动过滤掉设置了自动应用规则的字段
- 加强删除自动应用接口参数校验
- 清除主机字段时自动清理关联的主机自动应用规则
- 升级到新的用户列表接口
- 业务拓扑中tab页disabled改为在内部提示
- 全文检索支持上下键选择联想结果
- 扩展cmdb-tips组件
- 优化功能提示实现
- 主机操作显示属性应用
- 归档提示信息优化

**缺陷修复**
- 修复GetInstTableName转换模型ID为表名中使用表名作为object ID的问题
- 非模板服务实例添加进程提交报错
- 未开启权限时云区域查询报错
- 修复资源池bizId获取问题
- 修复属性自动应用搜索结果为空时展示不正确的问题
- 修复主机属性为bool类型默认值错误问题
- 修复默认选中节点不会拉取服务实例的问题

## [Version: 3.6.3] - 2019-12-25
**功能优化**
- 优化readme.md
- 饼图横轴数量设置隐藏
- 主机数量变化趋势图隐藏横轴数量设置
- 蓝鲸业务可编辑
- 同步按钮判断是否更改
- 优化多行集群名称正则校验
- 调整权限中心的事件订阅和云区域名称
- 调整服务模板编辑交互为直接保存
- 资源池分配权限对应为主机编辑权限
- 实例列表的展示单位统一到表头，不在行内显示

**缺陷修复**
- 修复模块下无服务实例时进行服务实例同步时产生的问题
- 修复集群模板下服务模板实例化模块统计错误的问题
- 修复进程实例bind_ip创建默认值和同步默认值不一致的问题
- 修复无法删除直接创建的模块下服务实例的进程的问题
- 修复属性跨组拖动没实际生效的问题
- 修复key导致展示信息重叠的问题
- 修复输入负号会变成NaN的问题
- 修复新建实例统计图表模型没有维度又是必填的问题
- 修复列表字段格式化方法缺失的问题
- 修复bool类型字段格式化转换错误的问题
- 修复运营统计中创建主机统计图表异常的问题
- 修复cmdb_operation解析权限数据失败导致周期性任务无法执行的问题

## [Version: 3.6.2] - 2019-12-17
**新增功能**
- 新增拓扑节点主机数查询接口
- 新增集群模板查询服务模板web接口
- 新增获取用户有权限的资源列表接口
- 新增人员组件/指令
- 新增v-overflow-tips指令
- 移除服务实例采用预览确认的形式

**功能优化**
- 审计查询带业务ID时分别判断业务下的权限和全局权限
- 云区域查询过滤出用户有权限的云区域部分数据（之前一旦有一个云区域无权限就会报错）
- 权限中心注册的资源名称调整：服务拓扑 -> 业务拓扑
- 切换查询业务列表的接口UI
- 优化文案提示
- 批量编辑校验交互调整
- 集群模板交互调整
- 集群模板名称长度调整为20个字符
- 收藏条件列表更新
- 调整查询业务链接
- 文件路径调整
- 实例数量优化
- 支持按名称排序
- 规范分页参数校验方式
- 模型字段交互调整
- 全文检索区分业务
- 查询业务接口，无权限时返回200状态码
- 面包屑交互修改
- 主机详情编辑获取焦点
- 转移主机同模块判断
- 主机选择器添加模块节点勾选功能
- 优化实例属性显示逻辑
- 面包屑调整
- 进程模板UI调整
- UI取消返回查看模式

**缺陷修复**
- 修复模型拓扑默认图标缩放太小和鼠标滚轮缩放比例太大问题
- 修复动态分组预览表格limit定位偏移的问题
- 修复运营统计定时配置解析失败的问题，设置默认时间
- 修复update/operation/chart/position权限资源未注册的问题
- 修复主机转移最终表现结果不正确的问题
- 修复主机筛选出现两个等于条件的问题
- 修复业务选择器申请业务权限参数为空的问题
- 修复自定义字段唯一性校验未包含业务信息的问题
- 主机克隆无法克隆在默认模块的主机
- 创建模型属性重复的property id返回成功
- 修复datacollection使用bk_inst_key作为唯一标识的问题，采集器上报的实例改为使用唯一标识判重
- 修复服务实例表格错误显示添加进程按钮的问题

## [Version: 3.5.21] - 2019-12-13
**缺陷修复**
- 修复模型属性更新、删除接口权限解析报错无layer信息 
- 修复/hosts/:bk_host_id/listen_ip_options调用list_hosts_without_app时无page.limit查询条件导致报错
- 修复实例数显示问题
- 修复模型分组无权限时提示信息错别字
- 修复无权限时提示信息的resourceID取第一个可能取到实例的模型ID而非实例ID
- 修复模型实例关联权限对特殊模型的实例鉴权的resourceType错误
- 修复模型唯一校验更改后，execel导入仍有实例名唯一校验的问题
- 修复业务搜索不能模糊匹配业务名的问题
- 修复有全局操作审计权限时无法按业务筛选操作审计的问题

## [Version: 3.5.20] - 2019-12-09
**新增功能**
- 主机身份接口新增业务自定义层级信息
- 新增蓝鲸拓扑根据json导入接口
- 查询业务下主机接口新增根据set信息查询的能力。
- 添加进程关系变化主机身份推送功能，但是业务拓扑层级变化也推送事件功能暂未支持。

**功能优化**
- 测试用例日志国输出优化
- 删除多余的redis配置信息
- 云区域注册到权限中心逻辑优化
- 优化adminserver同步逻辑，新增支持可配置和权限中心的同步间隔时间。
- 前端实例数量展示优化

**缺陷修复**
- 修复前端属性字段排序问题
- 修复auth在blog的flag没有赋值完成的时候调用导致blog的部分flag不生效


## [Version: 3.5.19] - 2019-11-27
** 新加的功能 **
- 实例导入，根据ID区分是新建，更新
- 内置及主线模型实例，禁止使用excel操作
- 添加移除主线模型自定义字段必填属性的upgrader
- 主机身份事件推送添加之前的主机身份信息
- 支持内外网IP的多IP搜索功能
- 拓扑检查小工具
- 权限资源操作小工具
- 支持小窗登陆

** 优化的功能 **
- 删除v2 兼容API
- 删除validator相关的冗余代码
- 删除模型单关联、多关联、外键三种字段类型及其相关的校验逻辑。
- eventserver中使用通用的HostIdentifier结构
- 优化eventserver主机身份相关的错误处理
- coreservice validator 性能优化
- 回显服务器小工具添加json格式化输出和提示
- 移除查询模型属性时多余的查询模型分组操作
- 移除查询业务时多余的查询模型的操作
- 权限同步流程优化
- 删除场景层valaditor相关的代码
- validator去掉了字符串转换为数字的场景。
- 业务查询接口优化，不再支持字段模糊查询
- 优化metric采集避免出现同一url的多handler记录

** 修复的问题 **
- 主机身份api查询模块名未赋值
- 通过模板同步进程实例属性时，进程实例属性bind_ip没有转换成ip地址的问题
- querybuilder 嵌套深度仅允许一层condition
- 模型之间可以创建不同关联类型的多个关联
- 更新实例旧接口权限资源解析错误
- 导入实例关联时鉴权错误
- 进程关系变化可能未推送事件的问题修复


## [Version: 3.6.1] - 2019-11-21
**新增功能**
- 新增业务的集群模版管理，可以方便通过集群模版快速创建、同步集群
- 新增运营统计功能
- 新增首页主机批量搜索
- 新增业务范围内的自定义字段
- 新增主机状态属性
- 优化支持通过云区域搜索主机
- 优化业务拓扑功能，整合了业务主机和服务拓扑
- 优化主机转移功能，拆分为业务模块、空闲模块、资源池三个子功能
- 优化主机转移功能，增加服务实例变更和移入空闲机确认流程
- 优化主机详情，支持移除当前主机所属模块
- 优化模型关系功能，合并了业务层级，支持对模型分组隐藏和查看，改进了UI交互
- 优化excel导出逻辑，必填字段排序置顶
- 优化日期输入组件支持填写日期
- 优化主机筛选条件，等于查询合并了IN查询功能

**缺陷修复**
- 修复关联关系导入失败


## [Version: 3.5.18] - 2019-11-08

**新增功能**
- 新增批量更新主机接口
- 新增查询主机和拓扑信息的接口
- 新增仅更新主机云区域的接口。
- 单字符类型支持",;"特殊字符

**功能优化**
- 批量编辑成功关闭侧滑
- 优化服务实例为空的显示
- 优化属性分组鉴权逻辑
- 通过通用实例接口只能编辑主机，不能创建和删除主机
- 优化非正常的topo节点中可能会出现导致的异常问题。
- UI新建/编辑进程模板权限调整
- 优化主机与实例关联导入特殊字符校验

**缺陷修复**
- 修复UI字段删除界面显示异常
- 修复导入实例关联，报解析授权信息失败问题
- 修复动态分组预览交互异常问题
- 修复实例新建关联table表头字段不显示问题
- 修复删除自定义层级时没有级联删除集群和模块的问题
- 修复权限中心，权限同步云区域会误解注册模型实例的问题

> 重要提示：
> 本次更新需要节点管理的版本为`v1.3.212`以上，否则节点管理云区域相关操作不可用。

## [Version: 3.5.17] - 2019-11-04
**新增功能**
- 新增云区域相关的CRUD操作接口。原有的通过通用模型实例接口进行云区域管理的方式已被禁用。
- 允许给主机添加自定义唯一约束。
- 新增主机收藏鉴权。

**功能优化**
- 模型实例模糊查询不受特殊字符影响。
- 云区域管理相关接口的开发商信息从请求头中获取，不依赖于用户传入。
- 业务的自定义模型层级管理中不再包含业务本身。
- UI添加sideslider关闭提示。
- UI禁止业务新建唯一校验。
- 调整前端资源池转主机转移到业务下的业务列表获取方式。
- 新建/编辑进程模板UI界面权限调整。

**缺陷修复**
- 修复导入主机与实例关联失败 && 字段有英文符号“,;”时报错。


## [Version: 3.5.16] - 2019-10-29
**新增功能**
- 新增云区域相关接口权限校验
- 新增查询主机拓扑关系权限校验
- 新增根据实例获取实例关联实例的数据
- 新增根据实例信息（实例的模型ID，实例ID）和模型ID（关联关系中的源，目的模型ID） 返回实例关联或者被关联模型实例得数据。
- 支持将进程属性字段设置成null
- 支持将进程模板属性字段设置成null
- 新增预设模型运营状态翻译
- 新增内置业务、模块、集群国际化翻译
- 新增zk操作小工具
- 禁止使用通用模型实例接口操作内置模型实例
- 禁止使用通用实例接口操作主线模型实例
- 主机查询条件收藏支持按业务隔离

**功能优化**
- 前后端内置权限管理下线
- 模块节点信息展示优化
- 更新magicbox版本
- 禁止将服务模板归类成非叶子节点的服务分类
- 优化主机详情变更记录排序
- 优化cpu频率的英文字段名和单位
- 调整业务列表ID列宽
- 全文检索展示样式调整
- 移除DeleteModelClassificationCascade接口
- 主机查询无分页参数时设置最大分页

**缺陷修复**
- 修复查询业务主机接口问题。
- 修复创建模块时，报服务分类校验不通过的问题。
- 进程升级到3.5时进程实例supplier account必须与服务实例保持一致
- 修复关联关系操作，审计日志header 记录name 和id 记录反了的错误

## [Version: 3.2.19] - 2019-10-23
**功能优化**
- 调整cpu频率的英文字段名和单位

**缺陷修复**
- 预设模型运营状态翻译不全
- 修复内置业务、模块、集群国际化缺失的问题
- 交换机模型分组基础信息名称翻译未生效
- 修复主机查询条件显示异常
- 修复excel导入实例时，有枚举字段会导入失败的问题

## [Version: 3.5.15] - 2019-10-14
**新增功能**
- 主机查询条件收藏支持按业务隔离[[#3280]](https://github.com/Tencent/bk-cmdb/pull/3280)

**功能优化**
- 操作审计详情表头显示及路由高亮设置[[#3279]](https://github.com/Tencent/bk-cmdb/pull/3279)
- 优化收藏名称太长导致删除按钮看不见问题[[#3275]](https://github.com/Tencent/bk-cmdb/pull/3275)

**缺陷修复**
- 修复主机搜索中集群与模块包含检索异常问题[[#3281]](https://github.com/Tencent/bk-cmdb/pull/3281)
- 修复关联关系操作，审计日志header 记录name 和id 记录反了的错误[[#3278]](https://github.com/Tencent/bk-cmdb/pull/3278)




## [Version: 3.5.14] - 2019-10-11
**新增功能**
- 整个UI界面改版
- 新增运营统计功能
- 场景层组件集成测试用例
- 前端UI获取关联关系API
- 新增动态分组执行鉴权功能
- 收藏条件添加删除
- 使用全局变量控制权限中心是否开启
- 调整获取资源池业务的方式，加缓存，提高性能。
- 调整longchar字段类型最大长度为 15000
- 日期字段支持手动输入
- 主机删除历史支持ip过滤
- 长短字符类型支持更多特殊符号
- 新增清理业务下在IAM中注册的实例和审计资源
- 新增获取实例关联关系的列表
- 新增统计每个内置模块主机数
- data-collection模块导入实例时记录审计日志
- 新增小工具，支持优雅退出与日志级别动态调整

**功能优化**
- 服务模板改为后端过滤搜索
- 主机数量显示控制
- 选择业务重置路由
- 全局资源屏蔽服务列表
- 进程属性整数值可选范围调整
- 业务数统计时排除归档业务和资源池
- 根据模板创建服务实例按照进程模板的顺序
- 批量创建/更新实例性能优化
- 动态分组添加行点击
- 动态分组预览过滤空$multilike参数
- 主机转移刷新拓扑树主机数量
- 更新翻译文件
- 主机查询中的$multilike操作符值为空时，不执行查询动作。
- 资源目录隐藏禁用模型
- 主机、模型实例table字段展示优化
- 模板进程别名不可修改
- 资源目录过滤禁用模型
- 模块创建接口兼容无服务分类参数
- 服务分类列表接口返回格式简化（api接口返回数据去掉统计相关字段）
- init.py优化调整
- 表格鼠标手势设置
- 服务拓扑标签搜索功能调整
- 服务模板编辑返回对应跳转界面
- 服务模板创建区别有无进程模板交互优化
- 无进程模板的服务实例交互优化
- 添加国际化翻译内容
- 调整了批量修改主机时鉴权的无权限提示。
- 主机实时状态界面接口没加载完不显示界面
- 拓扑树交互调整
- 读取excel数据内容时，去除首尾空格
- 优化adminserver升级，避免卡顿
- 调整服务实例的标签key校验规则
- 调整adminserver第一次同步的时间为5min

**缺陷修复**
- 修复实例查询中特殊字符查询问题
- 主机详情关联列表下主机无关联数据时的问题
- 服务实例删除主机未转移出去bug修复
- 服务分类查询业务ID参数未生效bug修复
- 修复业务主机上交资源池鉴权问题
- 服务分类初始化bk_root_id字段设置
- 进程实例列表查询接口没按预期方式退出（缺少return）
- 修复转移主机时，如空闲机，故障机，资源池进行转移时，跳过鉴权的问题。
- 修复批量更新主机信息时可能会出现的科学计数法问题。
- 修复v3.2中进程升级到v3.5中的服务实例过程中，多创建服务模板的问题。
- 操作审计由于时区导致的查询异常问题。



## [Version: 3.2.18] - 2019-09-24

**新增功能**
- 创建模型实例新增操作审计。
- 新增查询模型关联关系时，返回对应的关联关系id。

**功能优化**
- 优化查询模型分类的接口性能。
- 优化指更新模型实例的性能。
- 优化IP的正侧匹配方式。
- 优化当网络，中间件等内置模型删除后，升级的处理逻辑，直接跳过。
- 前端国际化翻译优化。

**缺陷修复**
- 修复长短字符长度校验未按byte校验的问题。
- 修复主机身份引起的异常问题。
- 修复主机查询，未根据用户指定的字段返回数据的问题。
- 根据模块名获取绑定进程信息问题。
- 优化当数据量大了以后可能会引发的升级卡住问题。


## [Version: 3.5.13] - 2019-09-17
**新增功能**
- datacollection实例导入，新增支持日志审计

**功能优化**
- 调整adminserver第一次同步的时间为5min。
- 权限同步日志优化。

**缺陷修复**
- 升级关联关系表中开发商id为空的问
- 修复调用权限中心时，并发读写的问题

## [Version: 3.5.12] - 2019-09-12
**新增功能**
- 支持按页同步权限数据

**功能优化**
- 优化全局主机同步逻辑


## [Version: 3.5.11] - 2019-09-11

**新增功能**
- 新增权限同步主从模式功能
- 调整前后端权限转换协议
- 新增进程服务属性分组
- 全文检索过滤掉资源池业务
- 运维用户组新增进程服务相关的权限
- 权限同步支持分页注册

**功能优化**
- 将"集群名字"调整为"集群名"
- 主机快照数据兼容主机数据字段为空的场景
- 不关联实例的资源类型不需要同步到权限中心
- 优化调整已注册实例的拉取策略
- 不关联实例的资源类型不需要注册/注销/更新到权限中心
- 调整模块服务分类属性不可修改

**缺陷修复**
- 修复关联关系导入错误问题。
- 修复部分一级导航权限模式设置不正确的问题
- 修复更新模型属性必填字段失败的问题
- 修复修改模块属性不生效,只返回部分字段的问题

## [Version: 3.5.10] - 2019-09-06
**新增功能**
- 默认开启公有实例的权限同步功能。

**功能优化**
- 系统内置的中间件等被删除后，不会阻塞升级流程。
- 前端UI展示优化。
- datacollection通过采集插件采集的实例数据也注册到权限中心。

**缺陷修复**
- 修复服务实例id冲突问题。

## [Version: 3.5.9] - 2019-09-04
**新增功能**
- 新增云区域权限同步功能
- 模型分类后端支持折叠功能。

**功能优化**
- UI模型展示优化

**缺陷修复**
- 根据模块名获取进程绑定信息缺陷。

## [Version: 3.5.8] - 2019-08-30
**功能优化**
- 业务模型相关资源不再注册权限中心。
- 服务拓扑相关前端展示优化。
- 多语言支持中语言切换优化，以cookie中为准。

**缺陷修复**
- 服务模板中服bk_func_id校验由兼容字符和数字方式调整为数字模式。
- 新增服务实例编辑进程无可填项。


## [Version: 3.5.7] - 2019-08-29
**新增功能**
- bk_mainline关联类型仍然显示。
- 新增服务拓扑相关的权限资源同步功能。

**功能优化**
- 主机指更新无权限提示优化。

**缺陷修复**
- 修复首页IP检索不能跳转问题。
- 修复查询公有模型失败的问题。
- 服务拓扑的同步显示问题。

## [Version: 3.5.6] - 2019-08-28
**缺陷修复**
- 修复查询关联类型返回502的问题。

## [Version: 3.5.5] - 2019-08-26
**新增功能**
- 非标准组件的节点支持判断主从的功能。

**功能优化**
- 优化提示模型必须有一组唯一校验的提示的问题。
- 全文索引高亮业务ID字段。

**缺陷修复**
- 解决healthz与version冲突的问题。
- event server推送订阅事件bugfix: 提前关闭了连接。
- 修复编辑主机按钮未去掉鉴权的问题。

## [Version: 3.5.4] - 2019-08-22
**新增功能**
- 主机业务模块集群的必填字段，不能增加和减少
- 进程，云区域不能新加字段。
- 支持从服务模板同步模块的服务分类信息。

**功能优化**
- 全文索引高亮业务字段。
- 修改主机失败错误提示优化。
- 首页去除主机/业务入口。
- 字符长度校验增强。
- 优化模型属性导入返回值。
- 样式优化。
- 完善同步模板。
- 优化收藏条件。
- 模型字段校验操作调整。
- 不允许删除在唯一校验中的属性。

**缺陷修复**
- 全文索引undefined问题修复。

## [Version: 3.5.2] - 2019-08-16
**新增功能**
- 服务分类对服务进行归类梳理
- 服务模板支持对服务进行标准化管理
- 服务实例以及服务模板同步功能
- 业务拓扑树返回每个结点包含的服务实例个数
- 服务实例支持label功能
- 服务拓扑导入导出功能
- 进程模板功能
- 全文检索功能，支持检索主机、实例、属性字段值等
- 对接蓝鲸权限中心，支持更细粒度的鉴权


**移除功能**
- 移除了进程管理功能，前版本的进程配置信息会平移到服务模板中
- 原权限控制功能

**优化功能**
- 前端优化、组件升级
- 服务实例标签搜索
- 服务模板变化时，服务实例同步加上状态展示
- 业务拓扑树默认按名字排序
- 业务拓扑改为服务拓扑，支持更加灵活的服务管理


**修复功能**
- 申请业务创建权限，看不到管理后台问题
- 主机分配到业务全局鉴权没生效问题处理
- 在同一个业务内，服务模板名称不能重复
- 进程模板删除后，同步模块时没有提示同步删除进程实例信息
- 修复切换资源池已分配/未分配主机切换时参数不正确的问题
- 查询业务未返回业务id

## [Version: 3.2.17] - 2019-08-02
**新增功能**
- 新增主机支持多字段模型查询功能

**修复问题**
- 修复长短字符长度校验未按byte校验的问题
- 修复表单校验错误提示文本超长未处理的问题

## [Version: 3.5.1] - 2019-07-31
**新增功能**
- 服务分类对服务进行归类梳理
- 服务模板支持对服务进行标准化管理
- 服务实例以及服务模板同步功能
- 业务拓扑树返回每个结点包含的服务实例个数
- 服务实例支持label功能
- 服务拓扑导入导出功能
- 进程模板功能
- 全文检索功能，支持检索主机、实例、属性字段值等
- 对接蓝鲸权限中心，支持更细粒度的鉴权

**移除功能**
- 移除了进程管理功能，前版本的进程配置信息会平移到服务模板中
- 原权限控制功能

**优化功能**
- 业务拓扑树默认按名字排序
- 业务拓扑改为服务拓扑，支持更加灵活的服务管理

## [Version: 3.2.16] - 2019-07-31
**新增功能**
- 支持根据用户名搜索业务

**功能优化**
- 不记录没有修改数据的操作审计

**修复的问题**
- 多语言支持问题修复
- 查询模型实例接口返回不匹配问题修复。
- 修复保存业务权限不生效的问题。

## [Version: 3.2.15] - 2019-07-16
**修复的问题**
- 修复主线拓扑断链的问题。

## [Version: 3.2.14] - 2019-07-15
**优化功能**
- 审计页面相关优化
- mongodb连接配置支持特殊字符

**修复的问题**
- 修复自定义层级主机查询失败问题

## [Version: 3.2.13] - 2019-07-04
**修复的问题**
- 修复导入主机实例关联报错问题
- 修复模型互相关联升级出现的缺陷

## [Version: 3.2.12] - 2019-07-02
**修复的问题**
- 修复实例数据关联关系导入提示唯一健个数失败问题
- 修复更新实例成功但报错的问题
- 修复升级panic问题

## [Version: 3.2.11] - 2019-06-28
**修复的问题**
- 修复云区域创建失败问题
- 修复没升级实例关联的问题

## [Version: 3.2.10] - 2019-06-24
**修复的问题**
- 修复v3.2.0之前的版本升级过程中导致的关联关系丢失问题
- 修复前端展示中模型关联关系不一致问题。

## [Version: 3.2.9] - 2019-06-19
 **优化功能**
 - 规范主机、实例模型导入模版，导出数据excel文件名
 - 
 **修复的问题**
 - 服务出现异常后返回代码调用的堆栈信息到用户的问题
 - 唯一性校验提示%s未被替换为字段名问题
 - 关联关系升级过程旧的单关联变成1：N时，源模型和目标模型顺序相反的问题
 - - 唯一标识显示不一致问题

## [Version: 3.5.0] - 2019-06-19
 **优化功能**
 - 新增服务分类对服务进行归类梳理
 - 新增服务模板支持对服务进行标准化管理

 **修复的问题**
 - 业务拓扑改为服务拓扑，支持更加灵活的服务管理
 - 移除了进程管理，前版本的进程配置信息会平移到服务模板中


## [Version: 3.4.3] - 2019-05-30
 **新增功能**
 - 初始化权限中心时内置的关联类型也注册到权限中心
 - 实例新加、修改、删除支持事务
 - toposerver、coreservice的 healthz 处理逻辑

**优化功能**
 - 主机详情页前端调整
 - healthz接口apimachinery接口

**修复的问题**
 - 操作审计过滤条件选中清空问题
 - healthz接口展示错误问题
 - ExtractRequestIDFromContext 输入参数空指针异常问题
 - 自定义模型通过导入方式修改后，字段的页面操作（编辑，删除）灰掉问题

## [Version: 3.4.2] - 2019-5-22
新增的功能：
- 主机沉浸式查看详情。

修复的问题：
- 修复权限与业务模型的相关缺陷

## [Version: 3.2.8] - 2019-5-8
优化的功能：
- 模型拓扑调整
- 业务搜索参数与分页调整
- MagicBox弹窗文字过长断行的问题
- 导出实例改为异步
- 新加参数解析失败日志
- 导入关联关系成功，不再提示用户
- 导出主机返回业务名
- 大数量级查询性能优化


修复的问题：
- 直接删除主线拓扑自定义模型的实例后，进程管理还能获取到实例所拥有的模块问题
- 模型关联唯一标识重复问题
- 移除实例已经被删除的实例关联数据
- 关联类型页搜索问题
- 关联类型正则问题
- 去除预览分组模块与集群排
- 筛选可选关联类型问题
- 侧滑标题溢出问题
- 新建角色名长度无限制问题
- 数字类型不支持支持输入负数问题
- 变更记录搜索当前页码错误问题
- 主机表格显示字段业务名未固定的问题
- 业务拓扑自定义层级节点主机查询不到的问题
- 修改模型名称头部标题未更新的问题
- 停用模型仍在拓扑图中出现的问题
- 批量编辑可以编辑唯一校验字段的问题
- 实例空属性值显示异常的问题
- 模型停用期间，实例仍可被其他有关系的模型实例关联
- 无法导出系统预设模型实例，接口返回服务器内部错误500且没有其他内容的问题
- 预置的中间件和网络设备模型缺少唯一问题
- 主线拓扑实例可以通过重命名达到名称重复效果问题
- 模型关联1:n，实际是n:n的问题
- 主机表格可能出现无表头字段的问题
- 导入文件对响应的处理配置不正确的问题



## [Version: 3.2.7] - 2019-04-17

新加的功能:

- Aix操作系统类型支持
- 支持通过组合唯一导出实例关联

修复的问题：

- 机属于多个业务模块的时候， 转移到空闲机模块或者故障机模块时业务模块未清除问题
- 单关联的两个模型，多个实例只能建一个实例关联关系的问题 
- 删除实例时没有删除实例关联问题
- 部分字段为空时显示不正确的问题 
- v2接口查询到不同业务下的同名称模块下的进程问题
- 模型字段用户提示没生效问题
- 模型显示配置交互修改，支持模型隐藏
- search_host接口无法使用"^"符号正则搜索数据问题
- 不能建立单关联实例关系问题


## [Version: 3.4.0] - 2019-04-16

新加的功能:
- 管理员后台页面，区分业务模式和管理后台模式
- 顶部业务切换菜单
- 私有模型管理，支持在业务下新建模型分组、模型等

优化的功能：
- 导航栏调整，新增基础资源菜单栏，下沉我的收藏菜单


## [Version: 3.2.6] - 2019-03-27

修复的问题：
- 修复由于权限原因导致无法删除模型实例的问题。

## [Version: 3.2.5] - 2019-03-27

修复的问题：
- 未实例化的模型关联关系不能被删除问题
- 有模型所有权限但不能导入导出实例问题
- 编辑模型拓扑可以删掉内置的mainline关联关系问题
- 模型的时间类型字段的分钟位可以写三位数字而导致校验不通过问题

优化 
- 导航栏新增[基础资源]菜单，并调整[我的收藏]菜单位置

## [Version: 3.2.4] - 2019-03-19

修复的问题：
- 从0.0.75前版本升级到3.2.X版本时多关联变为单关联的问题
- 筛选主机的“搜索范围”“IP”，多处选框不正常问题
- 批量修改主机的选择框视觉效果不正常，不显示勾问题
- 修复主机筛选，收藏按钮点击无反应问题
- 按录入时间查询主机失败问题
- 编辑布尔类型的模型字段时没有样式变化问题
- 布尔类型的模型字段不为真时，为空（应为假False）的问题
- 时间类型的字段在选择时有可能点出1位数字导致校验不通过问题
- 编辑模型字段时，浮点型非必填却被强制校验问题
- 模型停用后仍可通过打开的窗口新建实例问题
- 模型停用后仍可删除唯一校验问题
- 查看模型拓扑时，点击详情无法正常弹出问题
- 没有业务权限的用户可以恢复业务问题
  
## [Version: 3.2.3] - 2019-02-27

修复的问题：
- 修复标准运维调用主机属性克隆接口失败问题
- 修复关联关系页面超过单页条数不能翻页问题
- 修复新增关联类型时，必填字段[名称]没有星号问题
- 修复主机删除历史切换到第二页后无法回切到第一页问题
- 修复全新部署环境系统预设的事件推送，时间异常问题
- 修复删除有进程绑定的模块时，进程和模块的关联关系不会被同时删除，导致进程无法取消对该模块的绑定且进程也无法删除问题
- 修复删除在业务和集群间添加的自定义模型的关联字段时导致拓扑结构异常问题

## [Version: 3.2.2] - 2019-01-03

修复的问题：
- 修复升级后拓扑异常问题
- 修复导入模型模板文件后可以破坏原有操作限制（出现删除按钮）的问题
- 修复关联类型搜索框无法搜索预置关联类型问题
- 修复转移主机时点选空闲机/故障机/资源池的多选框出现两次确认弹窗的问题
- 修复主机自定义数字类型字段不能作为筛选条件问题
- 修复删除关联关系时直接回车会多次出现弹窗的问题
- 
## [Version: 3.2.1] - 2018-12-20

新加的功能:

- 国际化支持

优化的功能：

- 主机唯一性校验由固资编号改回云区域+内网ip
- 实例关联管理不显示对模块的关联
- 模型列表ICON区分内置模型


修复的问题：

- 修复实例拓扑图例点击点前点的左侧拓扑显示异常的问题
- 修复模型拓扑编辑模式切换图像会拉伸变形的问题
- 修复用户类型字段未校验问题

## [Version: 3.2.0] - 2018-12-05

依赖的组件：
- 部署脚本 >=1.6.1.19

新加的功能

- 新加独立的关联关系管理功能（通过关联类型建立关联）
- 支持多组字段唯一校验

优化的功能：

- 取消关联字段类型
- 模型拓扑前端调整
- 导航栏内容和结构调整


## [Version: 0.0.75] - 2018-11-08

修复的问题：

- 解决业务拓扑查询慢问题
- 解决导入拓扑时没删掉不含default字段的模块问题

## [Version: 0.0.74] - 2018-10-26
修复的问题：

- 解决adminserver导入拓扑时 "进程模块映射表" ,缺少开发商字段问题
- 解决推送的主机身份事件缺少进程信息问题
- 解决v2接口根据IP获取进程信息，业务下有多个进程，只返回其中一个


## [Version: 0.0.73] - 2018-10-26
修复的问题：

- 解决adminserver导入拓扑时 "进程模块映射表" 缺少开发商字段问题
- 解决推送的主机身份事件缺少进程信息问题

## [Version: 0.0.72] - 2018-10-21

修复的问题：

- 解决v2接口根据set_id查询模块失败问题
- 解决模块名重复问题

## [Version: 0.0.71] - 2018-10-16
新加的功能

- 新增业务拓扑根据主机属性搜索
- 新增首页的帮助文档、开源社区跳转
- 新增v2接口根据供应商获取主机信息接口
- 新增v2接口获取主机硬件数据接口

优化的功能：

- 增加http client 超时时长
- 增加mongodb查询超时限制
- 优化登录，注销逻辑
- 优化用户登录模块，支持插件式开发
- 优化整体按钮样式
- 优化业务拓扑样式
- 优化主机筛选、主机筛选条件收藏交互
- 优化表格全选功能，支持单页、跨页全选两种模式
- 优化自定义查询预览界面
- 优化权限管理交互
- 优化主机转移交互
- 优化模型管理的新增字段交互
- 优化新增实例关联交互
- 优化新建业务拓扑节点交互
- 优化错误提示，使错误提示内容更友好

修复的问题：

- 修复进程操作审计类型描述错误问题
- 修复资源池根据云区域查询已分配主机不展示问题
- 修复版本升级可能导致直连区域重复问题 


## [Version: 0.0.69] - 2018-09-27
新加的功能

优化的功能：

- 内置进程模型，调整提示内容
- 增加关联关系存在检测 

修复的问题：


## [Version: 0.0.68] - 2018-09-18

新加的功能

优化的功能：

- 事件订阅的创建接口支持upsert

修复的问题：

- 修复v2版本API新加主机，没有新加关联关系的bug


## [Version: 0.0.67] - 2018-09-13

新加的功能

- 删除模型时加入检测被山模型是否已被实例化，如果已被实例化则禁止删除。
- 导入数据支持数字到字符串的自动转换

优化的功能：

- 修复数据不存在的时候，panic 问题
- http 状态允许使用非200的值


修复的问题：

- 后台配置-权限管理-无法单独保存查询权限
- 使用站点地址作为API前缀
- 修复 操作审计-记录现在有很多，查询最早的记录出现失败
- 解决 接口创建的模型，没有对英文名称和中文名称做限制
- 解决删除主线不删除实例和分组问题
- 修复资源池根据云区域查询已分配主机无效
- 主机查询返回重复的业务、集群、模块信息
- 主机查询中查到空闲机的信息
- 修复查询关联权限
- 修复资源池根据云区域查询已分配主机无效
- v2 /host/updatehostmodule 转移主机到多个模块的失败
- 修复列表字段配置项过多时UI异常的问题
- 修复自动切换siteUrl协议不完全的问题
- 修复v2版本进程返回格式错误的问题
- 动态分组返回其他业务的数据
- 批量转移主机模块，操作审计日志只记录了第一个机器的数据
- 修复订阅不生效问题




## [Version: 0.0.66] - 2018-09-13

新加的功能

- 适配HTTPS


## [Version: 0.0.64] - 2018-09-12

新加的功能

- 适配HTTPS


## [Version: 0.0.63] - 2018-09-06

新加的功能

- 删除模型时加入检测被山模型是否已被实例化，如果已被实例化则禁止删除。

优化的功能：

- 归档业务会有变更记录
- 限制有关联模块的进程删除
- 动态分组返回其他业务的数据
- 语言字段设定为可编辑
- 进程增加“启动参数匹配规则”字段

修复的问题：

- 解决订阅没刷新问题
- 操作审计未显示业务
- 操作审计未显示业务
- 修复拓扑分类下模型的bk_childid，bk_parent_id的bk_issystem为true
- 修复apache，tomcat图标错误
- 补充遗漏的英文错误信息
- 根据时间查询主机，返回时间范围外的主机
- 模型属性字段管理会导出内建字段，需要屏蔽
- 修改SearchParam 的未初始化的bug
- 修改由于合并代码包引起的包引用错误
- 查询业务，分页查询不生效
- 业务下拥有 主机的时候，删除主线模型时会提示“有主机不允许删除”
- 修复人员列表API地址错误的问题
- 主线模型增加一定的异常处理能力，不至于导致所有业务拓扑异常


## [Version: 0.0.62] - 2018-09-05

新加的功能

- 删除模型时加入检测被山模型是否已被实例化，如果已被实例化则禁止删除。

优化的功能：

- 归档业务会有变更记录
- 限制有关联模块的进程删除
- 动态分组返回其他业务的数据
- 语言字段设定为可编辑
- 进程增加“启动参数匹配规则”字段

修复的问题：

- 解决订阅没刷新问题
- 操作审计未显示业务
- 操作审计未显示业务
- 修复拓扑分类下模型的bk_childid，bk_parent_id的bk_issystem为true
- 修复apache，tomcat图标错误
- 补充遗漏的英文错误信息
- 根据时间查询主机，返回时间范围外的主机
- 模型属性字段管理会导出内建字段，需要屏蔽
- 修改SearchParam 的未初始化的bug
- 修改由于合并代码包引起的包引用错误
- 查询业务，分页查询不生效
- 业务下拥有 主机的时候，删除主线模型时会提示“有主机不允许删除”
- 修复人员列表API地址错误的问题
- 主线模型增加一定的异常处理能力，不至于导致所有业务拓扑异常

## [Version: 0.0.61] - 2018-09-03
修复的问题：
- 基于0.0.50 修复批量转移空闲，主机原有模块未删除

## [Version: 0.0.60] - 2018-09-03
修复的问题
- 批量转移主机模块，操作审计日志缺少
- 修复动态分组数据返回错误
- 页面优化


## [Version: 0.0.59] - 2018-08-31
新加的功能
- 前端api地址通过页面获取

## [Version: 0.0.58] - 2018-08-30
新加的功能
- 修改配置文件模板

## [Version: 0.0.57] - 2018-08-29
新加的功能
- 前端根据协议探测是否启用https

## [Version: 0.0.56] - 2018-08-22
新加的功能
- 导入数据支持数字到字符串的自动转换

优化的功能:
- addHostFromAgent api 参数错误
修复的问题：
- 修复v2获取进程接口，返回结构异常问题



## [Version: 0.0.55] - 2018-08-22
修复的问题：
- 基于0.0.50 修复查询权限的问题



## [Version: 0.0.54] - 2018-08-21

优化的功能:
- 优化代码结构
- 优化HTTP方式
- 调整数据类型
- 关联关系优化
- 优化前端交互

修复的问题：
- 修复v2 api 业务语言使用数字展示
- 修复自定义查询选择关联字段作为条件，存储条件条件错误



## [Version: 0.0.50] - 2018-08-16
修复的问题：
- 修复v2 api 业务语言使用数字展示
- 修复自定义查询API，没有透传http header
- 修复自定义查询选择关联字段作为条件，存储条件条件错误


## [Version: 0.0.49] - 2018-07-27
优化的功能:
- 业务拓扑添加字段提示语
- 关联关系树形图隐藏子网区域
- 调整事件推送集群、模块分组

修复的问题：
- 修复转移主机对应业务错误的问题
- 修复时间自定义查询时间面板遮挡的问题
- 新建枚举类型字段选项过多时无法保存
- 清空集群模块下主机逻辑


## [Version: 0.0.48] - 2018-07-20
新加的功能:
- 首页改版
- 主机身份查询接口
- 关联关系树形图支持查看详情
- 通用实例列表显示属性配置支持还原默认功能
- 主线模型限制添加关联字段
- 支持多开发商ID 透传
- 开发商隔离
- 构建脚本可写入打包版本

优化的功能:
- 多个按钮组合调整
- 复制功能使用换行分隔每个数据
- mongdb 配置支持集群模式
- 时区默认为上海
- 统一初始化数字类型字段的option结构

修复的问题：
- 支持云区域ID作为查询查询主机身份的条件
- 没有值的字段，显示‘--’
- 业务拓扑无法修改每页显示条数
- 资源池删除历史界面变更记录隐藏展开/收起按钮
- 通用模型实例UI展示权限判断
- 批量修改实例属性，只修改布尔类型的值，无法保存
- 修复日期范围选择器时分秒不准确问题
- 修复自定义查询保存成功关闭时仍有提示的问题
- 修复订阅功能的开发商隔离问题
- init.py缺失数据采集模块配置
- 修复已分配主机判断条件不准确的问题
- 修复业务权限为空时判断不准确的问题
- 开发商隔离功能初始化缺失为各表添加默认开发商字段
- 修复导入模型分组的时候处理空字符串的bug
- 数字类型option兼容数字
- 导入模型字段出错
- 修复读取层级限制参数的bug
- 获取主机ID错误
- 修复表格尺寸切换未重置页码的问题
- 修复表格拖拽后无法排序的问题
- 修复拓扑关系修改后未重新刷新表格的问题
- 变更关联参数未清空问题
- 模型属性无法导出
- 批量修改时，没有勾选必填选项，不输入无法修改保存
- 删除模型分类后一直loading

## [Version: 0.0.47] - 2018-07-09

新加的功能：

- 开放主机划分模块时候 设置追加和替换的参数
- 支持跨版本升级（3.x.x~3.y.y）
- 自动发现功能模型及实例属性相关数据
- 模型图标更新，模型图标选择支持搜索
- 节点管理跳转链接修改
- 自定义查询交互改进
- 操作历史详情支持只显示变更的记录
- 事件推送支持集群、模块
- 支持批量删除实例
- 实例批量编辑
- 通过模块查询进程
- 模块支持显示进程
- 进程批量编辑
- 模块查看进程新增跳转
- 业务升级工具支持最小化导出导入

优化的功能：  

- 优化framework日志
- 业务下有主机，禁止业务归档
- 页面loading
- button组件优化
- 修改创建模型的默认图标
- 系统内置分类默认图标调整
- 按钮样式调整
- 进程管理显示字段调整 
- 模型管理仅管理员可见
- 业务权限精细化


修复的问题
      
- 自定义拓扑，关联防火墙模型，下拉的枚举数据不对
- 子网区域改为云区域
- 模型字段ID为0问题
- 修复datacollection channel 长时间没消息panic
- select组件点击空白未触发on-toggle事件
- 调整没有可编辑字段时判断条件
- 筛选后再次点击全选仍是选择全部内容
- 进程新增失败
- 批量编辑属性未清空上次选中的内容

## [Version: 0.0.46] - 2018-06-16

新加的功能：

- 面包屑导航

优化的功能：  

- 优化主机转移到资源池提示
- 业务下有主机，禁止业务归档


修复的问题
      
- 解决metric接口路由错误
- 操作审计的“所属业务”和“类型”的排序图标点击了不会高亮
- 业务拓扑有关联主机时，ui显示错误
- 拓扑关联，布尔类型搜索没有结果
- 单关联或者多关联的字段，设置了不可编辑，实际是可以编辑的
- 编辑多关联数据丢失
- 归档失败未弹出错误提示
- 筛选后点击全选仍是全部内容
- 主机关联无法删除
- 新增关联按钮无法点击
  



## [Version: 0.0.45] - 2018-06-11

### 修复的问题

- v2 api 克隆主机未克隆模块关系
- v2 api 根据用户角色获取业务，返回数据格式问题
- 短字符检验规则问题修复



## [Version: 0.0.44] - 2018-06-07

### 新加的功能

- 新增接口，支持批量更新进程
- 主机查询支持自定义层级


### 优化的功能：

- 微调导航二级菜单位置
- 更新 网络中间件模型字段
- 微调首页UI
- 主机管理导航不排序
- 隐藏主机自定义层级筛选
- 修改关联关系判断
- 修改关联关系判断
- 自定义查询特殊模型字段参数处理
- 修复新增关联部分类型数据筛选无效的问题
- 修复主机查询部分类型数据筛选无效的问题
- 关联业务不可选择已归档业务
- 关联更新后重新加载列表
- 修复拓扑主机关联UI异常的问题
- 短字符正则去掉英文逗号
- 按钮样式调整
- 全局视图国际化
- logo调整
- favicon更换
- 国际化调整
- 关联样式调整
- 关联弹层样式调整
- 更新字符串正则

### 修复的问题

- 由于hostserver机构变更，动态分组不展示数据问题
- 兼容api 支持通过参数获取主机数据
- 重构用户登陆与用户权限校验， 实现接口与实现的分离
- 模型字段分组导入
- 关联搜索没有结果
- 修复 data status 状态查询
- 修复通用实例部分关联查询无效的问题
- 删除关联可以多次点击
- 关联页面拖拽节点时隐藏弹层
- 实例名过长时，实例名跟关联图标重叠
- 编辑模型分组，修改图标失败
- 默认的分组中文名称不支持修改
- 创建模型成功时，中文名称会带上括号
- 关联业务时，查看业务详情信息报错
- 关联详情弹框高度异常
- 修复特殊字符限制

## [Version: 0.0.43] - 2018-06-04

### 新加的功能
- 首页改版
- 全局模型位置变更
- 关联增强全屏显示功能
- 字段顺序支持调整
- 业务归档查询图标调整
- 蓝鲸业务拓扑新增、编辑按钮置灰 并增加hover提示
- 403页面调整

## [Version: 0.0.40] - 2018-05-30

### 新加的功能
- 支持全局模型显示
- 支持关联增强
- 支持主机身份推送
- 支持新加主机、实例导入/导出新加描述页面
- 业务支持关闭与重启
- 主机支持跨业务
- 由于主机支持跨业务，主机查询api中返回数据结构biz,set，
 module将由map变更为map array, 内部使用者已经宣导，可能会影响外部使用者

### 修复的问题
- 修复通用模型实例部分查询无效的问题
- 修复业务查询无效的问题
- 修复关联中间件模型，出现重复数据的问题
- 修复主实时状态网卡流量展示错误的信息的问题
- 修复编辑主机收藏时名字重复的问题
- 修复 v2 api 导入机器缺少来源方式的问题
- 修复 v2 api 新加主机，漏判云区域是否存在的问题
- 修复 api 新加主机提示关联字段格式错误问题
- 修复一台机器属于多个业务时，业务拓扑显示不正确的问题
- 修复拥有拓扑编辑的权限，不能新增和编辑用户自定义的拓扑层级的问题
- 修复登录用户是业务的运维人员角色时 ，新增和编辑自定义的拓扑报错没有权限的问题
- 修复集群描述搜索条件包含时，搜索特殊符号报错的问题
- 修复集群-备注搜索特殊符号报错的问题


## [Version: 0.0.38] - 2018-05-21

### 新加的功能
- 全新首页
- 主机关联查询、多模块查询
- 主机业务拓扑展示
- 主机字段复制
- 新增图标
- 编辑状态关闭确认提示
- 主机跨业务导入
- 全新表格组件
- 支持主机，实例关联数据导入
- 根据业务拓扑获取支持通过模块类型过滤数据
- 操作日志支持模块转移类型
- 新增网络、中间件类的模型
- 设置云区域不可编辑
- 操作审计支持查看详情

### 修复的问题
- 进程管理搜索特殊字符，搜索界面一直加载中
- 新增数字的实例属性，勾选了唯一，不勾选必填，保存后必填选项也自动勾选
- 新增的拓扑下面有主机，删除拓扑时主机也直接被删除了，主机在资源池和空闲机找不到
- 变更关联，操作系统类型搜索无结果
- 自定义查询搜索框，输入特殊字符搜索报错查询失败
- excel无法导入关联模型、业务、主机字段的值
- 蓝鲸业务下面的进程的协议默认为空
- 勾选所有实例，删除实例，点击导出实例属性，报错
- 当用户没有修改的权限，可以通过导入修改实例属性
- 新增时枚举必填字段的菜单，保存成功后无该菜单
- 编辑集群界面，点击新增模块，模块类型显示不正确
- 集成平台删除了用户名，该用户是业务的运维人员角色时，编辑业务保存时不会提示用户不存在
- 主机资源池界面主机显示过多时，无法切换每页显示行数的菜单
- 删除历史的录入时间跟主机资源池显示不一致
- 模型被停用后，可以继续创建实例属性
- 录入时间，时分秒无法修改
- 业务拓扑界面出现异常
- 修复部分页面提示语显示问题
- 修复部分翻译遗漏问题
- 修复部分操作路径下相关属性显示空白问题
- 修复最大值和最小值相关编辑及保存异常问题

